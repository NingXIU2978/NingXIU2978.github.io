<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Oracle笔记(总) | NINGXIU's 学习博客</title><meta name="author" content="NINGXIU"><meta name="copyright" content="NINGXIU"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="数据库介绍1、数据库介绍1.1 数据库英文：Database 简单的说，数据库就是一个存放数据的仓库，在日常工作中，常常需要把相关的数据放进这样的仓库，并根据管理的需要进行相应处理。 1.2 数据库规范数据库中的数据都有一定规律结构，相同类型的数据放在一起，不同类型的数据之间相互隔离 数据库由统一的规则来读写：由SQL语言专门来读写数据库，一般都是由程序来读写数据库内容 1.3 常用数据库常用的数">
<meta property="og:type" content="article">
<meta property="og:title" content="Oracle笔记(总)">
<meta property="og:url" content="https://ningxiu2978.github.io/2025/09/18/Oracle%E7%AC%94%E8%AE%B0(%E6%80%BB)/index.html">
<meta property="og:site_name" content="NINGXIU&#39;s 学习博客">
<meta property="og:description" content="数据库介绍1、数据库介绍1.1 数据库英文：Database 简单的说，数据库就是一个存放数据的仓库，在日常工作中，常常需要把相关的数据放进这样的仓库，并根据管理的需要进行相应处理。 1.2 数据库规范数据库中的数据都有一定规律结构，相同类型的数据放在一起，不同类型的数据之间相互隔离 数据库由统一的规则来读写：由SQL语言专门来读写数据库，一般都是由程序来读写数据库内容 1.3 常用数据库常用的数">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://ningxiu2978.github.io/img/avatar.jpg">
<meta property="article:published_time" content="2025-09-18T13:17:11.610Z">
<meta property="article:modified_time" content="2025-09-18T13:17:57.988Z">
<meta property="article:author" content="NINGXIU">
<meta property="article:tag" content="Oracle">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://ningxiu2978.github.io/img/avatar.jpg"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Oracle笔记(总)",
  "url": "https://ningxiu2978.github.io/2025/09/18/Oracle%E7%AC%94%E8%AE%B0(%E6%80%BB)/",
  "image": "https://ningxiu2978.github.io/img/avatar.jpg",
  "datePublished": "2025-09-18T13:17:11.610Z",
  "dateModified": "2025-09-18T13:17:57.988Z",
  "author": [
    {
      "@type": "Person",
      "name": "NINGXIU",
      "url": "https://ningxiu2978.github.io"
    }
  ]
}</script><link rel="shortcut icon" href="/img/favicon.ico"><link rel="canonical" href="https://ningxiu2978.github.io/2025/09/18/Oracle%E7%AC%94%E8%AE%B0(%E6%80%BB)/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.json","preload":true,"top_n_per_article":-1,"unescape":false,"pagination":{"enable":true,"hitsPerPage":8},"languages":{"hits_empty":"未找到符合您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":true,"highlightMacStyle":false},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Oracle笔记(总)',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><meta name="generator" content="Hexo 7.3.0"></head><body><div id="web_bg" style="background-image: url(https://pic1.imgdb.cn/item/65578a9fc458853aef80544a.jpg);"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/img/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">11</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">8</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">4</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/gallery/"><i class="fa-fw fas fa-solid fa-images"></i><span> 相册</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">NINGXIU's 学习博客</span></a><a class="nav-page-title" href="/"><span class="site-name">Oracle笔记(总)</span><span class="site-name"><i class="fa-solid fa-circle-arrow-left"></i><span>  返回首页</span></span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></span></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/gallery/"><i class="fa-fw fas fa-solid fa-images"></i><span> 相册</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">Oracle笔记(总)</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2025-09-18T13:17:11.610Z" title="发表于 2025-09-18 21:17:11">2025-09-18</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2025-09-18T13:17:57.988Z" title="更新于 2025-09-18 21:17:57">2025-09-18</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Oracle/">Oracle</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">总字数:</span><span class="word-count">7.8k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>30分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><h3 id="数据库介绍"><a href="#数据库介绍" class="headerlink" title="数据库介绍"></a><strong>数据库介绍</strong></h3><h4 id="1、数据库介绍"><a href="#1、数据库介绍" class="headerlink" title="1、数据库介绍"></a><strong>1、数据库介绍</strong></h4><h5 id="1-1-数据库"><a href="#1-1-数据库" class="headerlink" title="1.1 数据库"></a><strong>1.1</strong> <strong>数据库</strong></h5><p>英文：Database</p>
<p>简单的说，数据库就是一个<strong>存放数据的仓库，<strong>在日常工作中，常常需要把相关的数据放进这样的</strong>仓库</strong>，并根据管理的需要进行相应处理。</p>
<h5 id="1-2-数据库规范"><a href="#1-2-数据库规范" class="headerlink" title="1.2 数据库规范"></a><strong>1.2</strong> <strong>数据库规范</strong></h5><p>数据库中的数据都有一定规律结构，相同类型的数据放在一起，不同类型的数据之间相互隔离</p>
<p>数据库由统一的规则来读写：由SQL语言专门来读写数据库，一般都是由程序来读写数据库内容</p>
<h5 id="1-3-常用数据库"><a href="#1-3-常用数据库" class="headerlink" title="1.3 常用数据库"></a><strong>1.3</strong> <strong>常用数据库</strong></h5><p>常用的数据库有：<strong>DB2、Oracle、Mysql、SQL server、SQLite</strong></p>
<h5 id="1-4-数据库分类"><a href="#1-4-数据库分类" class="headerlink" title="1.4 数据库分类"></a><strong>1.4</strong> <strong>数据库分类</strong></h5><p>根据存储模型可以将数据库划分为【关系型数据库】和【非关系型数据库】</p>
<p>关系型数据库：是建立在关系模型基础上的数据库，简单来说，关系模型指的就是<strong>二维表</strong>格模型，而一个关系型数据库就是由二维表及其之间的联系所组成的一个数据组织。</p>
<p>标准数据查询语言SQL就是一种基于关系型数据库的语言，这种语言执行对关系型数据库中数据的检索和操作</p>
<p>什么是二维表：有行有列的表格，例如 Excel</p>
<p>关系型数据库（表与表之间有关系：体现为主外键）</p>
<table>
<thead>
<tr>
<th>分类</th>
<th>产品</th>
<th>特点</th>
</tr>
</thead>
<tbody><tr>
<td>小型</td>
<td>access、foxbase</td>
<td>负载量小，用户大概100人以内（留言板、信息管理系统）；成本在千元之内，对安全性要求不高</td>
</tr>
<tr>
<td>中型</td>
<td>sqlserver、mysql</td>
<td>负载量日访问量在5000~10000之间；成本在万元以内（商务网站），满足日常安全需求</td>
</tr>
<tr>
<td>大型</td>
<td>sybase、db2、oracle</td>
<td>海量负载，可以处理海量数据（sybase &lt;Oracle&lt;db2 海量处理能力）；安全性高，相对贵</td>
</tr>
</tbody></table>
<p><strong>1.5</strong> <strong>数据库管理系统</strong></p>
<p>简称：DBMS</p>
<p><strong>数据库管理系统</strong>（Database Management System）是一种操作和管理数据库的大型软件，用于建立、使用和维护数据库，简称DBMS,他对数据库进行统一的管理和控制，以保证数据库的安全性和完整性，用户通过DBMS访问数据库中的数据，数据库管理员也通过DBMS进行数据库的维护工作。它可以使多个应用程序和用户用不同的方法在同一时刻或不同时刻去建立、修改和访问数据库。</p>
<p><strong>数据库和数据库管理是一个东西吗？</strong></p>
<ul>
<li><p><strong>数据库</strong>：存储数据的地方（就是一些数据文件而已）</p>
</li>
<li><p><strong>数据库管理系统</strong>：用来管理数据以及用户操作数据的软件</p>
</li>
</ul>
<h4 id="2-、Oracle介绍"><a href="#2-、Oracle介绍" class="headerlink" title="2 、Oracle介绍"></a><strong>2 、Oracle介绍</strong></h4><p><img src="/images/image-20250826190352494.png" alt="image-20250826190352494"></p>
<h5 id="2-1-Oracle-Database"><a href="#2-1-Oracle-Database" class="headerlink" title="2.1 Oracle Database"></a><strong>2.1 Oracle Database</strong></h5><p>又叫 Oracle RDBMS，或者简称 Oracle，是甲骨文公司的一款关系型数据库管理系统，平常所说的Oracle是指Oracle数据管理系统。Oracle数据库管理系统是管理数据库访问的计算机软件（Oracle Database Manager System）。</p>
<p>它由 <strong>Oracle<em>数据库和Oracle实例（instance）</em></strong> 构成（区分mysql，<strong>mysql没有实例的概念</strong>）。</p>
<h5 id="2-2-Oracle数据库"><a href="#2-2-Oracle数据库" class="headerlink" title="2.2 Oracle数据库"></a><strong>2.2 Oracle数据库</strong></h5><p>物理操作系统文件或磁盘的集合。Oracle数据库包括 数据文件ORA或者DBF、控制文件、联机日志、参数文件。</p>
<h5 id="2-3-Oracle实例"><a href="#2-3-Oracle实例" class="headerlink" title="2.3 Oracle实例"></a><strong>2.3 Oracle实例</strong></h5><p>位于物理内存的数据结构，他只是一个后台进程，或者一个后台资源的集合，通过这个后台进程可以连接上某一个数据库。</p>
<p>Oracle用他们来管理数据库访问，用户如果要存取数据库里的数据（也就是硬盘上的文件），必须通过<strong>Oracle实例</strong>才能实现，不能直接读取硬盘上的文件。</p>
<p>实际上，Oracle实例就是平常所说的数据库服务（service）。</p>
<p>在任何时刻，一个实例只能与一个数据库关联，访问一个数据库；而同一个数据库可由多个实例访问（RAC）</p>
<h5 id="2-4-表空间"><a href="#2-4-表空间" class="headerlink" title="2.4 表空间"></a><strong>2.4</strong> <strong>表空间</strong></h5><p>表空间是一个用来管理数据存储的逻辑概念，表空间只是和数据文件（ORA或者DBF文件）发生关系，数据文件是物理的，一个表空间可以包含多个数据文件，而一个数据文件只能隶属于一个表空间（类似于windows中的文件夹，里面可以放很多文件）</p>
<p><strong>作用</strong>：方便存储管理，提高IO性能，备份和恢复</p>
<p>分类：永久性、临时性、撤销表空间</p>
<h5 id="2-5-用户"><a href="#2-5-用户" class="headerlink" title="2.5 用户"></a><strong>2.5</strong> <strong>用户</strong></h5><p>用户是在实例下建立的，不同实例可以建相同名字的用户</p>
<p>Oracle数据库建好后，要想在数据库里面建表，必须先为数据库建立用户，并且为用户指定表空间</p>
<p>有两个默认的用户 sys 和 system</p>
<table>
<thead>
<tr>
<th>用户</th>
<th>SYS</th>
<th>SYSTEM</th>
</tr>
</thead>
<tbody><tr>
<td>地位</td>
<td>Oracle的一个超级用户</td>
<td>Oracle默认的系统管理员</td>
</tr>
<tr>
<td>作用</td>
<td>主要用来维护系统信息和管理实例</td>
<td>通常用来管理Oracle数据库的用户、权限和存储等</td>
</tr>
<tr>
<td>登陆身份</td>
<td>只能以SYSDBA或SYSOPER角色登录</td>
<td>可以以Normal方式登录</td>
</tr>
</tbody></table>
<h5 id="2-6-权限"><a href="#2-6-权限" class="headerlink" title="2.6 权限"></a><strong>2.6</strong> <strong>权限</strong></h5><p>不同的用户拥有不同的权限</p>
<p>权限：权限指执行特定类型SQL 命令或访问其他对象的权利</p>
<p>系统权限和对象权限：</p>
<ul>
<li><p>系统权限：允许用户执行某些数据库操作，如创建表就是一个系统权限</p>
</li>
<li><p>对象权限：允许用户对数据库对象（如表、视图、序列等）执行特定操作</p>
</li>
</ul>
<h5 id="2-7-角色"><a href="#2-7-角色" class="headerlink" title="2.7 角色"></a><strong>2.7</strong> <strong>角色</strong></h5><p>为了简化权限管理，引入了角色的概念角色： 是具有名称的一组权限的组合</p>
<p>常用系统预定义角色有三个：</p>
<ul>
<li><p><strong>CONNECT</strong>：临时用户，只能登录系统</p>
</li>
<li><p><strong>RESOURCE</strong>：更为可靠和正式的用户，可以 进行数据库的大部分操作</p>
</li>
<li><p><strong>DBA</strong>：数据库管理员角色，拥有管理数据库的最高权限</p>
</li>
</ul>
<h5 id="2-8-表"><a href="#2-8-表" class="headerlink" title="2.8 表"></a><strong>2.8</strong> <strong>表</strong></h5><p>有了数据库、表空间和用户，就可以用自定义的用户在自己的表空间中创建表了，有了表就可以存储数据了</p>
<p>Oracle、MySQL、 sqlserver 关系型数据库都是以二维表存储数据的数据库</p>
<p>**二维表：**指的是有行和列的表格</p>
<h5 id="2-9-数据文件"><a href="#2-9-数据文件" class="headerlink" title="2.9 数据文件"></a><strong>2.9</strong> <strong>数据文件</strong></h5><p>数据文件是数据库的物理存储单位，数据库的数据是存储在表空间中的，真正是在某一个或多个数据文件中，而一个表空间可以由一个或多个数据文件组成，一个数据文件只能属于一个表空间，一旦数据文件被加入到某个表空间后，就不能删除这个文件，如果要删除某个数据文件，只有删除其所属的表空间才行</p>
<h3 id="一、DDL"><a href="#一、DDL" class="headerlink" title="一、DDL"></a>一、DDL</h3><h5 id="1、创建表空间"><a href="#1、创建表空间" class="headerlink" title="1、创建表空间"></a>1、创建表空间</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Create</span> Tablespace my_tablespace</span><br><span class="line">Datafile <span class="string">&#x27;C:\Users\Pan\Desktop\sc250701\oracle\my_tablespace.dbf&#x27;</span> <span class="comment">-- 数据文件 文件路径</span></span><br><span class="line">Size <span class="number">100</span>m     <span class="comment">-- 文件大小</span></span><br><span class="line">Autoextend <span class="keyword">On</span> Next <span class="number">32</span>m Maxsize Unlimited;  <span class="comment">-- 文件大小达到最大的时候，自动扩容</span></span><br></pre></td></tr></table></figure>

<h5 id="删除表空间"><a href="#删除表空间" class="headerlink" title="删除表空间"></a>删除表空间</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- Drop Tablespace my_tablespace;   -- 删除无任何数据对象的表空间</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">Drop</span> Tablespace my_tablespace Including Contents <span class="keyword">And</span>  Datafiles; <span class="comment">-- 删除有数据对象的表空间</span></span><br></pre></td></tr></table></figure>

<h5 id="2、创建用户"><a href="#2、创建用户" class="headerlink" title="2、创建用户"></a>2、创建用户</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Create</span> <span class="keyword">User</span> pan  <span class="comment">-- 用户名</span></span><br><span class="line">Identified <span class="keyword">By</span> root  <span class="comment">-- 密码</span></span><br><span class="line"><span class="keyword">Default</span> Tablespace my_tablespace;  <span class="comment">-- 默认表空间</span></span><br></pre></td></tr></table></figure>

<h5 id="3、分配权限"><a href="#3、分配权限" class="headerlink" title="3、分配权限"></a>3、分配权限</h5><ul>
<li><p><strong>connect</strong>： 临时用户</p>
</li>
<li><p><strong>resource</strong>：更为可靠的正式用户</p>
</li>
<li><p><strong>dba</strong>：数据库管 理员角色</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Grant</span> <span class="keyword">Connect</span>,Resource,Dba <span class="keyword">To</span> pan; </span><br></pre></td></tr></table></figure></li>
</ul>
<h5 id="4、创建teacher表"><a href="#4、创建teacher表" class="headerlink" title="4、创建teacher表"></a>4、创建teacher表</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Create Table</span> teacher (</span><br><span class="line"> tno Number(<span class="number">4</span>) <span class="keyword">Not Null</span>,</span><br><span class="line"> tname Varchar2(<span class="number">50</span>) <span class="keyword">Not Null</span>,</span><br><span class="line"> tid <span class="type">Char</span>(<span class="number">18</span>),</span><br><span class="line"> gender <span class="type">Char</span>(<span class="number">2</span>),</span><br><span class="line"> birthday <span class="type">Date</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h5 id="5、添加主键约束"><a href="#5、添加主键约束" class="headerlink" title="5、添加主键约束"></a>5、添加主键约束</h5><ul>
<li>设置tno字段为 主键约束（<strong>oracle中没有主键自增</strong>）</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER TABLE</span> teacher <span class="keyword">ADD constraint</span> pk_teacher_tno <span class="keyword">PRIMARY KEY</span>(tno);</span><br></pre></td></tr></table></figure>

<h5 id="6、删除约束"><a href="#6、删除约束" class="headerlink" title="6、删除约束"></a>6、删除约束</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER TABLE</span> TEACHER <span class="keyword">DROP</span> <span class="keyword">constraint</span> pk_teacher_tno;</span><br></pre></td></tr></table></figure>

<h5 id="7、添加检查约束"><a href="#7、添加检查约束" class="headerlink" title="7、添加检查约束"></a>7、添加检查约束</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER TABLE</span> teacher <span class="keyword">ADD constraint</span> ck_teacher_gender <span class="keyword">CHECK</span>(gender <span class="keyword">IN</span> (<span class="string">&#x27;男&#x27;</span>,<span class="string">&#x27;女&#x27;</span>));</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT INTO</span> TEACHER <span class="keyword">VALUES</span>(<span class="number">101</span>,<span class="string">&#x27;赵辉&#x27;</span>,<span class="string">&#x27;362326197805281911&#x27;</span>,<span class="string">&#x27;男&#x27;</span>,<span class="keyword">NULL</span>);</span><br></pre></td></tr></table></figure>

<h5 id="8、创建表的时候添加-约束"><a href="#8、创建表的时候添加-约束" class="headerlink" title="8、创建表的时候添加 约束"></a>8、创建表的时候添加 约束</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE TABLE</span> dept(</span><br><span class="line">  id NUMBER(<span class="number">6</span>),</span><br><span class="line">  dname VARCHAR2(<span class="number">255</span>),</span><br><span class="line">  loc VARCHAR2(<span class="number">255</span>),</span><br><span class="line">  <span class="keyword">constraint</span> uq_dname <span class="keyword">UNIQUE</span>(dname), <span class="comment">-- 唯一约束</span></span><br><span class="line">  <span class="keyword">constraint</span> pk_id <span class="keyword">PRIMARY KEY</span>(id) <span class="comment">-- 主键约束</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h5 id="9、drop，truncate，delete"><a href="#9、drop，truncate，delete" class="headerlink" title="9、drop，truncate，delete"></a>9、drop，truncate，delete</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> dept;</span><br><span class="line"></span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> TEACHER <span class="keyword">WHERE</span> tno<span class="operator">=</span><span class="number">101</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">truncate</span> <span class="keyword">TABLE</span> TEACHER;</span><br></pre></td></tr></table></figure>



<h4 id="oracle-数据类型"><a href="#oracle-数据类型" class="headerlink" title="oracle 数据类型"></a>oracle 数据类型</h4><h5 id="1、字符型"><a href="#1、字符型" class="headerlink" title="1、字符型"></a>1、字符型</h5><p>  1.1 <code>char</code> 类型：固定长度字符串，位数不足时默认补空格<br>  1.2 <code>varchar2</code> 类型：可变长字符串</p>
<h5 id="2、数值类型"><a href="#2、数值类型" class="headerlink" title="2、数值类型"></a>2、数值类型</h5><p>  <code>number</code>：<strong>整数和浮点数</strong>，最多存储<strong>38位</strong>数字<br>  语法：<code>number(p,s)</code></p>
<ul>
<li><p>p：表示精度（<strong>总长度</strong>）</p>
</li>
<li><p>s：表示小数位（<strong>四舍五入</strong>）例如：3.14159 → 3.142</p>
</li>
</ul>
<pre><code>例如：number(10,3) 表示总长度为10，小数位长度3
</code></pre>
  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">123.456 -&gt; 123.456</span><br><span class="line">123.4567 -&gt; 123.457</span><br><span class="line">1234567.8987 -&gt; 1234567.899</span><br><span class="line">12345678.8989 存不进，总长度为10，小数位占3，整数位只能是7位</span><br></pre></td></tr></table></figure>

<h5 id="3、日期类型"><a href="#3、日期类型" class="headerlink" title="3、日期类型"></a>3、日期类型</h5><p>  3.1 date：存储的是 <strong>年月日时分秒</strong><br>  3.2 timestamp：存储的是年月日时分秒(秒值包含小数)</p>
<h5 id="4、lob类型"><a href="#4、lob类型" class="headerlink" title="4、lob类型"></a>4、lob类型</h5><p>blob：二进制对象，适合存储音视频文件、图形文件等数据<br>clob：字符格式的大型对象，适合存储长文本数据</p>
<h3 id="二、DML"><a href="#二、DML" class="headerlink" title="二、DML"></a>二、DML</h3><h4 id="1、序列"><a href="#1、序列" class="headerlink" title="1、序列"></a>1、<strong>序列</strong></h4><p>序列 <code>sequence</code>：是 oracle 提供的用于产生一系列<strong>唯一数字</strong>的数据库对象</p>
<p><strong>创建语法</strong>：</p>
<blockquote>
<p>​	<code>create sequence 序列名称</code>   –创建序列</p>
<ul>
<li>[start with n] –序列的起始值 (递增默认是 minvalue, 递减默认 maxvalue)</li>
<li>[increment by n]; –递增的序列值</li>
</ul>
</blockquote>
<p>注意：名称一般以 <code>sq_</code> 开头</p>
<p><strong>使用序列</strong>：</p>
<ul>
<li>序列名.currval – 查询当前值</li>
<li>序列名.nextval – 获取下一个值</li>
</ul>
<p><strong>注意：第一次使用序列，必须使用 nextval</strong></p>
<h5 id="创建序列"><a href="#创建序列" class="headerlink" title="创建序列"></a><strong>创建序列</strong></h5><p>  创建 起始值为1001，每次递增1的序列</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> sequence sq_teacher</span><br><span class="line"><span class="keyword">START</span> <span class="keyword">WITH</span> <span class="number">1001</span></span><br><span class="line">INCREMENT <span class="keyword">BY</span> <span class="number">1</span>; <span class="comment">-- 默认为1 可以不写</span></span><br></pre></td></tr></table></figure>



<h4 id="2、dual-虚拟表"><a href="#2、dual-虚拟表" class="headerlink" title="2、dual 虚拟表"></a>2、<strong>dual 虚拟表</strong></h4><p>作用：本身不存储数据，为了辅助 sql 语句的完整性</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> sq_teacher.nextval <span class="keyword">FROM</span> dual;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> sq_teacher.currval <span class="keyword">FROM</span> dual;</span><br></pre></td></tr></table></figure>



<h4 id="3、INSERT"><a href="#3、INSERT" class="headerlink" title="3、INSERT"></a>3、INSERT</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT INTO</span> TEACHER(tno,tname) <span class="keyword">VALUES</span>(sq_teacher.nextval,<span class="string">&#x27;赵辉&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">show</span> variables <span class="keyword">like</span> <span class="string">&#x27;autocommit&#x27;</span>;</span><br></pre></td></tr></table></figure>



<h4 id="4、update"><a href="#4、update" class="headerlink" title="4、update"></a>4、update</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> TEACHER <span class="keyword">SET</span> tname<span class="operator">=</span><span class="string">&#x27;张三&#x27;</span> <span class="keyword">WHERE</span> tno<span class="operator">=</span><span class="number">1011</span>;</span><br></pre></td></tr></table></figure>



<h4 id="5、delete"><a href="#5、delete" class="headerlink" title="5、delete"></a>5、delete</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DELETE</span> FORM TEACHER <span class="keyword">WHERE</span> tno<span class="operator">=</span><span class="number">1009</span>;</span><br></pre></td></tr></table></figure>



<h3 id="三、DQL"><a href="#三、DQL" class="headerlink" title="三、DQL"></a>三、DQL</h3><h4 id="DQL：查询语句"><a href="#DQL：查询语句" class="headerlink" title="DQL：查询语句"></a>DQL：查询语句</h4><h4 id="1、基础查询"><a href="#1、基础查询" class="headerlink" title="1、基础查询"></a>1、基础查询</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> teacher;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> tno <span class="keyword">FROM</span> teacher;</span><br></pre></td></tr></table></figure>



<h4 id="2、AS语句-单引号-和-双引号的区别"><a href="#2、AS语句-单引号-和-双引号的区别" class="headerlink" title="2、AS语句 + 单引号 和 双引号的区别"></a>2、AS语句 + 单引号 和 双引号的区别</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> tno <span class="keyword">AS</span> &quot;教师编号&quot;, tname <span class="keyword">AS</span> &quot;tName&quot; <span class="keyword">FROM</span> teacher;</span><br></pre></td></tr></table></figure>

<p><strong>单引号</strong>：引用一个字符串<strong>常量</strong>(字面量)<br><strong>双引号</strong>：引用的是关键字，表示对象、字段名、别名等等</p>
<p><strong>注意</strong>：别名加双引号的<strong>作用</strong>是：<strong>区分大小写</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> TEACHER <span class="keyword">WHERE</span> tname<span class="operator">=</span><span class="string">&#x27;赵辉&#x27;</span>;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> TEACHER <span class="keyword">WHERE</span> tname<span class="operator">=</span>&quot;赵辉&quot;; <span class="comment">-- 报错</span></span><br></pre></td></tr></table></figure>



<h4 id="3、去重：DISTINCT"><a href="#3、去重：DISTINCT" class="headerlink" title="3、去重：DISTINCT"></a>3、去重：DISTINCT</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> sal <span class="keyword">FROM</span> TEACHER;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> sal <span class="keyword">FROM</span> TEACHER;</span><br></pre></td></tr></table></figure>



<h4 id="4、运算符号"><a href="#4、运算符号" class="headerlink" title="4、运算符号"></a>4、运算符号</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> tname &quot;姓名&quot;,sal <span class="operator">*</span><span class="number">12</span> &quot;年薪&quot; <span class="keyword">FROM</span> TEACHER;</span><br></pre></td></tr></table></figure>



<h4 id="5、空值处理：NVL-和-COALESCE"><a href="#5、空值处理：NVL-和-COALESCE" class="headerlink" title="5、空值处理：NVL 和 COALESCE"></a>5、空值处理：NVL 和 COALESCE</h4><p><strong>注意</strong>：<strong>任何值和null值进行运算，结果都是null</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> tname &quot;姓名&quot;,sal<span class="operator">+</span>comm &quot;薪水&quot; <span class="keyword">FROM</span> TEACHER;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> tname &quot;姓名&quot;,sal<span class="operator">+</span>NVL(comm,<span class="number">0</span>) &quot;薪水&quot; <span class="keyword">FROM</span> TEACHER;</span><br><span class="line"><span class="keyword">SELECT</span> tname &quot;姓名&quot;,sal<span class="operator">+</span><span class="built_in">COALESCE</span>(comm,<span class="number">0</span>) &quot;薪水&quot; <span class="keyword">FROM</span> TEACHER;</span><br></pre></td></tr></table></figure>



<h4 id="6、连接符-CONCAT-ch1-ch2-和"><a href="#6、连接符-CONCAT-ch1-ch2-和" class="headerlink" title="6、连接符 CONCAT(ch1, ch2) 和 ||"></a>6、连接符 CONCAT(ch1, ch2) 和 ||</h4><p> CONCAT()接收<strong>两个参数</strong>拼接</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> CONCAT(CONCAT(<span class="string">&#x27;编号是：&#x27;</span>,tno),CONCAT(<span class="string">&#x27;,姓名是：&#x27;</span>,tname)) </span><br><span class="line"><span class="keyword">AS</span> &quot;基本信息&quot; <span class="keyword">FROM</span> TEACHER;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="string">&#x27;编号是：&#x27;</span><span class="operator">||</span> tno <span class="operator">||</span> <span class="string">&#x27;,姓名是：&#x27;</span><span class="operator">||</span> tname</span><br><span class="line"><span class="keyword">AS</span> &quot;基本信息&quot; <span class="keyword">FROM</span> TEACHER;</span><br></pre></td></tr></table></figure>



<h4 id="7、子查询"><a href="#7、子查询" class="headerlink" title="7、子查询"></a>7、子查询</h4><p><strong>exists</strong>子查询：</p>
<p>用于判断子查询是否返回至少一行数据<br>作用：常用于<strong>存在性验证</strong>、<strong>反向筛选(not exists)</strong><br><strong>逻辑</strong>：</p>
<ul>
<li><p>对主查询的每一行，执行一次子查询，判断子查询是否有结果（大于等于1行）</p>
</li>
<li><p>如果子查询找到第一条匹配的记录，立即停止子查询(短路执行)，直接返回true，<br>主查询会保留该行</p>
</li>
<li><p>如果子查询没有匹配记录，返回false，主查询排除该行</p>
</li>
</ul>
<p><strong>语法</strong>：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> 主表字段</span><br><span class="line">  <span class="keyword">FROM</span> 主表</span><br><span class="line">  <span class="keyword">WHERE</span> <span class="keyword">EXISTS</span>(</span><br><span class="line">	<span class="keyword">SELECT</span> <span class="number">1</span> <span class="comment">-- 固定使用1（不查询字段） ， * 也可以，不推荐</span></span><br><span class="line">	<span class="keyword">FROM</span> 子查询表</span><br><span class="line">	<span class="keyword">WHERE</span> mgr.tno <span class="operator">=</span> t.mgrno);</span><br></pre></td></tr></table></figure>

<p><strong>注意</strong>：<br><strong>select 1 的意义</strong><br>子查询的select列表可以写任意值(select *)，但是select 1更高效<br>（<strong>优化器会忽略字段的内容，仅判断存在性</strong>）  </p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="number">1</span> <span class="keyword">FROM</span> dual;  </span><br></pre></td></tr></table></figure>



<p><strong>使用场景</strong><br>（存在性验证）<br>需求：查询有下属（是部门经理）的教师信息</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> mgr.tno &quot;经理编号&quot;, mgr.tname &quot;经理名称&quot;</span><br><span class="line"><span class="keyword">FROM</span> teacher mgr </span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">EXISTS</span>(</span><br><span class="line">	<span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line">	<span class="keyword">FROM</span> teacher t</span><br><span class="line">	<span class="keyword">WHERE</span> mgr.tno <span class="operator">=</span> t.mgrno</span><br><span class="line"> );</span><br></pre></td></tr></table></figure>

<p>（方向筛选）<br>需求：查询没有下属（是部门经理）的教师信息</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> mgr.tno &quot;经理编号&quot;, mgr.tname &quot;经理名称&quot;</span><br><span class="line"><span class="keyword">FROM</span> teacher mgr </span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span>(</span><br><span class="line">	<span class="keyword">SELECT</span> <span class="number">1</span></span><br><span class="line">	<span class="keyword">FROM</span> teacher t</span><br><span class="line">	<span class="keyword">WHERE</span> mgr.tno <span class="operator">=</span> t.mgrno</span><br><span class="line"> );</span><br></pre></td></tr></table></figure>

<p>练习：查询有员工的部门编号和部门名称</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> d.deptno, d.dname</span><br><span class="line"><span class="keyword">FROM</span>  DEPT d</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">EXISTS</span>(</span><br><span class="line">	<span class="keyword">SELECT</span> <span class="number">1</span></span><br><span class="line">	<span class="keyword">FROM</span> EMP e</span><br><span class="line">	<span class="keyword">WHERE</span> e.deptno<span class="operator">=</span>d.deptno</span><br><span class="line">);</span><br></pre></td></tr></table></figure>



<h4 id="8、联合查询"><a href="#8、联合查询" class="headerlink" title="8、联合查询"></a>8、联合查询</h4><p>UNION 去重  </p>
<p>UNION ALL 不去重,并集</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> tno, tname, gender <span class="keyword">FROM</span> teacher <span class="keyword">WHERE</span> tno <span class="keyword">IN</span> (<span class="number">1002</span>,<span class="number">1004</span>,<span class="number">1006</span>)</span><br><span class="line"><span class="keyword">UNION</span> </span><br><span class="line"><span class="keyword">SELECT</span> tno, tname, gender <span class="keyword">FROM</span> teacher <span class="keyword">WHERE</span> tno <span class="keyword">IN</span> (<span class="number">1002</span>,<span class="number">1004</span>,<span class="number">1007</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> tno, tname, gender <span class="keyword">FROM</span> teacher <span class="keyword">WHERE</span> tno <span class="keyword">IN</span> (<span class="number">1002</span>,<span class="number">1004</span>,<span class="number">1006</span>)</span><br><span class="line"><span class="keyword">UNION</span> <span class="keyword">ALL</span></span><br><span class="line"><span class="keyword">SELECT</span> tno, tname, gender <span class="keyword">FROM</span> teacher <span class="keyword">WHERE</span> tno <span class="keyword">IN</span> (<span class="number">1002</span>,<span class="number">1004</span>,<span class="number">1007</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">INTERSECT</span> <span class="comment">-- 求交集</span></span><br><span class="line"><span class="keyword">SELECT</span> tno, tname, gender <span class="keyword">FROM</span> teacher <span class="keyword">WHERE</span> tno <span class="keyword">IN</span> (<span class="number">1002</span>,<span class="number">1004</span>,<span class="number">1006</span>)</span><br><span class="line"><span class="keyword">INTERSECT</span> <span class="comment">-- 求交集</span></span><br><span class="line"><span class="keyword">SELECT</span> tno, tname, gender <span class="keyword">FROM</span> teacher <span class="keyword">WHERE</span> tno <span class="keyword">IN</span> (<span class="number">1002</span>,<span class="number">1004</span>,<span class="number">1007</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> tno, tname, gender <span class="keyword">FROM</span> teacher <span class="keyword">WHERE</span> tno <span class="keyword">IN</span> (<span class="number">1002</span>,<span class="number">1004</span>,<span class="number">1006</span>)</span><br><span class="line">MINUS <span class="comment">-- 求第一个查询结果中没有在后面的查询结果中出现的记录</span></span><br><span class="line"><span class="keyword">SELECT</span> tno, tname, gender <span class="keyword">FROM</span> teacher <span class="keyword">WHERE</span> tno <span class="keyword">IN</span> (<span class="number">1002</span>,<span class="number">1004</span>,<span class="number">1007</span>);</span><br><span class="line"><span class="comment">-- 1006</span></span><br></pre></td></tr></table></figure>



<h4 id="9、分页查询"><a href="#9、分页查询" class="headerlink" title="9、分页查询"></a>9、分页查询</h4><p>oracle中，提供了<strong>伪列</strong>：<br>就像一个表列，但是它并没有存储在表中，伪列可以从表中<strong>查询</strong>，但是不能插入、更新和删除他们的值</p>
<p>常用的伪列有两种</p>
<h5 id="1-rowid："><a href="#1-rowid：" class="headerlink" title="(1) rowid："></a>(1) <strong>rowid</strong>：</h5><p>是表中行的存储地址，该地址可以唯一的标识数据库中的一行<br>rowid 是一个<strong>18位字符</strong>，标识该行在数据库中的相对唯一的物理位置<br><strong>作用</strong>：只在数据库内部使用，通常用于快速查找数据行</p>
<p>了解：18位字符采用 base64编码<br>1<del>6：该行数据所在的数据对象id<br>7</del>9：该行数据所在的相对数据文件 id<br>10<del>15：该行数据所在的数据块编号<br>16</del>18位：该行数据行编号</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> tname ,ROWID <span class="keyword">FROM</span> TEACHER;</span><br><span class="line">		<span class="comment">--rowid表示该行在数据库中的物理地址</span></span><br></pre></td></tr></table></figure>

<p>​		</p>
<h5 id="2-Rownum：分页查询"><a href="#2-Rownum：分页查询" class="headerlink" title="(2) Rownum：分页查询"></a>(2) <strong>Rownum</strong>：分页查询</h5><p>Rownum是查询返回的结果集中行的序号，可以使用它来限制查询返回的行数</p>
<p><strong>注意事项</strong>：</p>
<blockquote>
<ul>
<li>rownum 不能以任何基表的名称作为前缀</li>
<li>子查询中的 rownum 必须要有<strong>别名</strong>，否则还是不会查出记录（因为 rownum 不是哪个表中的列，如果不起别名，那么不知道 rownum 是于查询的列还是主查寻的列)</li>
<li>rownum 永远按照<strong>默认的顺序</strong>生成</li>
<li>rownum 只能使用**&lt;，&lt;&#x3D;**，不能使用&#x3D;，&gt;，&gt;&#x3D;</li>
<li><strong>子查询</strong>可以间接使用：&#x3D;，&gt;，&gt;&#x3D;</li>
</ul>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> rownum,tno,tname <span class="keyword">FROM</span> TEACHER;</span><br><span class="line">	<span class="comment">-- 查询出 rownum，在结果中显示</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> t.rownum,t.tno,t.tname <span class="keyword">FROM</span> TEACHER t; </span><br><span class="line">	<span class="comment">-- 报错，不能给rownum加前缀</span></span><br></pre></td></tr></table></figure>

<p>练习：查询教师表中前5个老师的信息，并且按工资从高到低排序</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> rowid,rownum,tno,tname,sal <span class="keyword">FROM</span> TEACHER </span><br><span class="line"><span class="keyword">WHERE</span> rownum <span class="operator">&lt;=</span> <span class="number">5</span></span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> sal <span class="keyword">DESC</span>;</span><br></pre></td></tr></table></figure>

<p>查询第6个老师的信息，查询第6个老师之后的老师信息</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">from</span> teacher <span class="keyword">where</span> rownum <span class="operator">=</span> <span class="number">6</span>;  <span class="comment">-- 空行</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">from</span> teacher <span class="keyword">where</span> rownum <span class="operator">&gt;</span> <span class="number">6</span>;  <span class="comment">-- 空行</span></span><br><span class="line"><span class="keyword">SELECT</span> t.<span class="operator">*</span>, ROWNUM rn <span class="keyword">from</span> teacher t <span class="keyword">WHERE</span> rn <span class="operator">=</span> <span class="number">6</span>; <span class="comment">-- 报错</span></span><br></pre></td></tr></table></figure>

<p><strong>解决方式</strong>：</p>
<p><strong>使用子查询，将子查询的结果当做一张表</strong>，然后从新的表中查询 rn&#x3D;6</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> (<span class="keyword">SELECT</span> t.<span class="operator">*</span>, rownum rn <span class="keyword">FROM</span> TEACHER t</span><br><span class="line">) <span class="keyword">WHERE</span> rn<span class="operator">=</span><span class="number">6</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> t.<span class="operator">*</span>, ROWNUM rn <span class="keyword">from</span> teacher t <span class="keyword">WHERE</span> rn <span class="operator">=</span> <span class="number">1</span>;</span><br></pre></td></tr></table></figure>

<p>练习：获取教师表中薪水最高的前5人</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 1. 按工资排序</span></span><br><span class="line"><span class="comment">-- 2. 将排序好的结果当作表，取前5人</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> (</span><br><span class="line">	<span class="keyword">SELECT</span> <span class="operator">*</span>  <span class="keyword">FROM</span> TEACHER t  <span class="keyword">ORDER</span> <span class="keyword">BY</span> sal <span class="keyword">DESC</span>) </span><br><span class="line">	<span class="keyword">WHERE</span> rownum <span class="operator">&lt;</span> <span class="number">6</span>;</span><br></pre></td></tr></table></figure>

<p>获取教师表中新水排名第6的老师信息</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> (</span><br><span class="line">	<span class="keyword">SELECT</span> t.<span class="operator">*</span>,rownum rn  <span class="keyword">FROM</span> TEACHER t <span class="keyword">ORDER</span> <span class="keyword">BY</span> sal <span class="keyword">DESC</span> ) </span><br><span class="line"><span class="keyword">WHERE</span> rn<span class="operator">=</span><span class="number">6</span>;</span><br></pre></td></tr></table></figure>

<p>获取薪水排名在6~10 的教师信息</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> (</span><br><span class="line"> <span class="comment">-- rownum 在 order by 之前执行</span></span><br><span class="line"> <span class="comment">-- 先给行加上行号，当作列放到 t 表</span></span><br><span class="line">	<span class="keyword">SELECT</span> t.<span class="operator">*</span>,rownum rn  <span class="keyword">FROM</span> TEACHER t <span class="keyword">ORDER</span> <span class="keyword">BY</span> sal <span class="keyword">DESC</span>)</span><br><span class="line"><span class="keyword">WHERE</span> rn <span class="keyword">BETWEEN</span> <span class="number">6</span> <span class="keyword">AND</span> <span class="number">10</span>;</span><br></pre></td></tr></table></figure>

<p><strong>使用子查询</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> (</span><br><span class="line">	<span class="keyword">SELECT</span> t.<span class="operator">*</span>,rownum rn  <span class="keyword">FROM</span> (</span><br><span class="line">		<span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> TEACHER <span class="keyword">ORDER</span> <span class="keyword">BY</span> sal <span class="keyword">DESC</span></span><br><span class="line">	) t <span class="keyword">WHERE</span> rownum <span class="operator">&lt;=</span><span class="number">10</span> </span><br><span class="line">) <span class="keyword">WHERE</span> rn <span class="operator">&gt;=</span> <span class="number">6</span>;				</span><br></pre></td></tr></table></figure>



<p>–每页查询5条数据，查询第3页<br><strong>使用子查询</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> (</span><br><span class="line">	<span class="keyword">SELECT</span> t.<span class="operator">*</span>,rownum rn  <span class="keyword">FROM</span> (</span><br><span class="line">		<span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> TEACHER <span class="keyword">ORDER</span> <span class="keyword">BY</span> sal <span class="keyword">DESC</span></span><br><span class="line">	) t <span class="keyword">WHERE</span> rownum <span class="operator">&lt;=</span><span class="number">10</span> <span class="comment">-- 记录数*页码</span></span><br><span class="line">) <span class="keyword">WHERE</span> rn <span class="operator">&gt;=</span> <span class="number">5</span>;		<span class="comment">--记录数 * (页码-1)</span></span><br></pre></td></tr></table></figure>

<p>练习：查询教师表数据，查第3页，每页查3条数据</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> (</span><br><span class="line"><span class="keyword">SELECT</span> t.<span class="operator">*</span>,rownum rn  <span class="keyword">FROM</span>  TEACHER t  <span class="keyword">WHERE</span> rownum <span class="operator">&lt;=</span><span class="number">9</span> </span><br><span class="line">) <span class="keyword">WHERE</span> rn <span class="operator">&gt;=</span> <span class="number">6</span>;			</span><br></pre></td></tr></table></figure>


<p>​	</p>
<p><strong>小结</strong>：<br><strong>1、mysql中如何实现分页查询</strong></p>
<blockquote>
<p>1.在mysql中使用 <code>limit</code> 关键字实现分页查询</p>
<p>2.limit 关键字后面可以跟 <strong>2个参数</strong>，第一个参数表示 <strong>起始的索引值</strong>，第二个参数表示查询的<strong>每页记录数</strong></p>
<p>3.limit 后面也可以<strong>只跟一个参数</strong>，此时该参数指的是所有记录中的<strong>前n条记录</strong>（也可以理解位第一页的数据）；</p>
<p>4.**mysql 8.0 **以后新增了一个分页语法，是 <strong>limit 记录数 offset 起始索引</strong></p>
</blockquote>
<p><strong>2、oracle中如何实现分页查询</strong><br>oracle 中是通过rownum 伪列和子查询 实现分页查询的</p>
<p><strong>先通过子查询对数据进行排序，再在外部查询中使用<code>ROWNUM</code>进行分页。</strong></p>
<h3 id="四、sql函数"><a href="#四、sql函数" class="headerlink" title="四、sql函数"></a>四、sql函数</h3><h4 id="1、数字函数"><a href="#1、数字函数" class="headerlink" title="1、数字函数"></a>1、数字函数</h4><h5 id="round-：四舍五入"><a href="#round-：四舍五入" class="headerlink" title="round() ：四舍五入"></a>round() ：四舍五入</h5><h5 id="trunc-：截断"><a href="#trunc-：截断" class="headerlink" title="trunc() ：截断"></a>trunc() ：截断</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> ROUND(<span class="number">3.14159</span>, <span class="number">3</span>) <span class="keyword">FROM</span> dual; <span class="comment">-- 3.142 四舍五入</span></span><br><span class="line"><span class="keyword">SELECT</span> TRUNC(<span class="number">3.14159</span>, <span class="number">3</span>) <span class="keyword">FROM</span> dual; <span class="comment">-- 3.141 截断</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> deptno, TRUNC(<span class="built_in">AVG</span>(sal),<span class="number">2</span>) &quot;avgsal&quot;</span><br><span class="line"><span class="keyword">FROM</span> TEACHER <span class="keyword">GROUP</span> <span class="keyword">BY</span> deptno;</span><br></pre></td></tr></table></figure>



<h4 id="2、字符串函数"><a href="#2、字符串函数" class="headerlink" title="2、字符串函数"></a>2、字符串函数</h4><h5 id="instr-："><a href="#instr-：" class="headerlink" title="instr()："></a>instr()：</h5><p>​	查找指定字符在字符串中的第一次出现的位置</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 存在，就返回当前字符的位置，不存在，返回0</span></span><br><span class="line"><span class="keyword">SELECT</span> INSTR(<span class="string">&#x27;Abcdc&#x27;</span>, <span class="string">&#x27;c&#x27;</span>) <span class="keyword">FROM</span> dual; <span class="comment">-- 3</span></span><br><span class="line"><span class="keyword">SELECT</span> INSTR(<span class="string">&#x27;Aabcdc&#x27;</span>, <span class="string">&#x27;H&#x27;</span>) <span class="keyword">FROM</span> dual; <span class="comment">-- 不存在， 返回 0</span></span><br><span class="line"><span class="keyword">SELECT</span> INSTR(<span class="string">&#x27;万里长城万里长&#x27;</span>,<span class="string">&#x27;万里&#x27;</span>) <span class="keyword">FROM</span> dual; <span class="comment">-- 1</span></span><br></pre></td></tr></table></figure>



<h5 id="substr-："><a href="#substr-：" class="headerlink" title="substr()："></a>substr()：</h5><p>​	截取字符串</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> SUBSTR(<span class="string">&#x27;万里长城万里长&#x27;</span>,<span class="number">0</span>,<span class="number">3</span>) <span class="keyword">FROM</span> dual; <span class="comment">-- 万里长</span></span><br><span class="line"><span class="comment">-- 可以从0开始，起始位置 0和1 结果一样</span></span><br><span class="line"><span class="keyword">SELECT</span> SUBSTR(<span class="string">&#x27;万里长城万里长&#x27;</span>,<span class="number">1</span>,<span class="number">3</span>) <span class="keyword">FROM</span> dual; <span class="comment">-- 万里长</span></span><br></pre></td></tr></table></figure>



<h5 id="length-："><a href="#length-：" class="headerlink" title="length()："></a>length()：</h5><p>​	字符串长度（mysql 中 length()返回字节长度）</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> LENGTH(<span class="string">&#x27;万里长城万里长&#x27;</span>) <span class="keyword">FROM</span> dual;  <span class="comment">-- 7</span></span><br></pre></td></tr></table></figure>



<h5 id="replace-："><a href="#replace-：" class="headerlink" title="replace()："></a>replace()：</h5><p>​	替换</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> replace(<span class="string">&#x27;万里长城万里长&#x27;</span>,<span class="string">&#x27;长城&#x27;</span>,<span class="string">&#x27;黄河&#x27;</span>) <span class="keyword">FROM</span> dual;  <span class="comment">-- 万里黄河万里长</span></span><br></pre></td></tr></table></figure>



<h5 id="concat-："><a href="#concat-：" class="headerlink" title="concat()："></a>concat()：</h5><p>​	拼接两个字符串</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> CONCAT(<span class="string">&#x27;长城&#x27;</span>,<span class="string">&#x27;黄河&#x27;</span>) <span class="keyword">FROM</span> dual; <span class="comment">-- 长城黄河</span></span><br></pre></td></tr></table></figure>



<h4 id="3、转换函数"><a href="#3、转换函数" class="headerlink" title="3、转换函数"></a>3、转换函数</h4><h5 id="3-1-to-char、to-date、to-number"><a href="#3-1-to-char、to-date、to-number" class="headerlink" title="3.1 to_char、to_date、to_number"></a>3.1 <strong>to_char</strong>、<strong>to_date</strong>、<strong>to_number</strong></h5><blockquote>
<p><strong>时间通配符</strong>：<br>年： y，四位使用 yyyy<br>月： m，两位使用 mm<br>日： d，两位使用 dd<br>时： h，两位使用 hh，24小时写法：hh24<br>分： mi，代表两位分钟数<br>秒： s，两位使用 ss</p>
</blockquote>
<p><strong>mysql</strong>中插入日期类型的字段，可以使用日期格式的字符串<br><strong>oracle</strong>中不行</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- mysql</span></span><br><span class="line"><span class="keyword">INSERT INTO</span> t_emp(empno, ename, hiredate) </span><br><span class="line"><span class="keyword">VALUES</span> (<span class="number">7777</span>, <span class="string">&#x27;tom&#x27;</span>, <span class="string">&#x27;2025-08-27&#x27;</span>); </span><br><span class="line"><span class="comment">-- oracle：</span></span><br><span class="line"><span class="keyword">INSERT INTO</span> emp(empno, ename, hiredate) </span><br><span class="line"><span class="keyword">VALUES</span> (<span class="number">7777</span>, <span class="string">&#x27;tom&#x27;</span>, <span class="string">&#x27;2025-08-27&#x27;</span>); <span class="comment">--报错</span></span><br></pre></td></tr></table></figure>

<h5 id="3-1-日期转换-to-date"><a href="#3-1-日期转换-to-date" class="headerlink" title="3.1 日期转换 to_date"></a>3.1 日期转换 to_date</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> TO_DATE(<span class="string">&#x27;2025-08-07&#x27;</span>, <span class="string">&#x27;yyyy-mm-dd&#x27;</span>) <span class="keyword">FROM</span> dual;</span><br><span class="line">      <span class="comment">-- 2025-08-07 00:00:00</span></span><br><span class="line">      </span><br><span class="line"><span class="keyword">SELECT</span> TO_DATE(<span class="string">&#x27;2025-08-07 14:00:00&#x27;</span>, <span class="string">&#x27;yyyy-mm-dd hh:mi:ss&#x27;</span>) </span><br><span class="line"><span class="keyword">FROM</span> dual;   <span class="comment">-- 2025-08-07 14:00:00</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> TO_DATE(<span class="string">&#x27;2025-08-07 20:00:00&#x27;</span>, <span class="string">&#x27;yyyy-mm-dd hh24:mi:ss&#x27;</span>) </span><br><span class="line"><span class="keyword">FROM</span> dual;   <span class="comment">-- 2025-08-07 20:00:00</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT INTO</span> emp(empno, ename, hiredate) </span><br><span class="line"><span class="keyword">VALUES</span> (<span class="number">7777</span>, <span class="string">&#x27;tom&#x27;</span>, TO_DATE(<span class="string">&#x27;2025-08-07&#x27;</span>, <span class="string">&#x27;yyyy-mm-dd&#x27;</span>)); </span><br></pre></td></tr></table></figure>

<h6 id="符合日期格式的数字也可以转换"><a href="#符合日期格式的数字也可以转换" class="headerlink" title="符合日期格式的数字也可以转换"></a>符合日期格式的数字也可以转换</h6><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> TO_DATE(<span class="number">20250807</span>, <span class="string">&#x27;yyyy-mm-dd&#x27;</span>) <span class="keyword">FROM</span> dual;</span><br><span class="line">      <span class="comment">-- 2025-08-07 00:00:00</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> TO_DATE(<span class="number">20250807140000</span>, <span class="string">&#x27;yyyy-mm-dd hh24:mi:ss&#x27;</span>) <span class="keyword">FROM</span> dual;</span><br><span class="line">      <span class="comment">-- 2025-08-07 14:00:00</span></span><br></pre></td></tr></table></figure>

<h5 id="3-2-字符串转换函数-to-char"><a href="#3-2-字符串转换函数-to-char" class="headerlink" title="3.2 字符串转换函数 to_char"></a>3.2 字符串转换函数 to_char</h5><h6 id="日期转换字符串"><a href="#日期转换字符串" class="headerlink" title="日期转换字符串"></a>日期转换字符串</h6><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> SYSDATE <span class="keyword">FROM</span> dual; <span class="comment">-- 系统时间</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> TO_CHAR(SYSDATE,<span class="string">&#x27;yyyy-mm-dd hh:mi:ss&#x27;</span>) <span class="keyword">FROM</span> dual;</span><br></pre></td></tr></table></figure>

<p><strong>注意</strong>：<strong>日期转换为字符串时</strong>，特殊的分隔符，需要使用<strong>双引号</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> TO_CHAR(SYSDATE,<span class="string">&#x27;yyyy&quot;年&quot;mm&quot;月&quot;dd&quot;日&quot; hh&quot;时&quot;mi&quot;分&quot;ss&quot;秒&quot;&#x27;</span>) </span><br><span class="line"><span class="keyword">FROM</span> dual;</span><br><span class="line">    <span class="comment">-- 2025年08月27日 04时36分20秒</span></span><br></pre></td></tr></table></figure>

<h6 id="数字转换字符串"><a href="#数字转换字符串" class="headerlink" title="数字转换字符串"></a><strong>数字转换字符串</strong></h6><p>格式中的9 代表一个数字，不能换成其他数字</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> TO_CHAR(<span class="number">123456789</span>,<span class="string">&#x27;999,999,999&#x27;</span>) <span class="keyword">FROM</span> dual;</span><br><span class="line">    <span class="comment">-- 123,456,789  </span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> TO_CHAR(<span class="number">123456789</span>,<span class="string">&#x27;99,999,999&#x27;</span>) <span class="keyword">FROM</span> dual;</span><br><span class="line"> <span class="comment">--  ###########，不能匹配到长度</span></span><br></pre></td></tr></table></figure>

<p>查询教师表中教师信息，工资的整数部分，每三位逗号隔开</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> tno, tname, TO_CHAR(sal, <span class="string">&#x27;999,999.99&#x27;</span>) <span class="keyword">FROM</span> TEACHER;</span><br><span class="line">  <span class="comment">-- 29370.95 -&gt; 29,370.95</span></span><br></pre></td></tr></table></figure>

<h5 id="3-3-数字转换函数-to-number"><a href="#3-3-数字转换函数-to-number" class="headerlink" title="3.3 数字转换函数 to_number"></a>3.3 数字转换函数 to_number</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> TO_NUMBER(<span class="string">&#x27;20&#x27;</span>) <span class="operator">+</span> <span class="number">10</span> <span class="keyword">FROM</span> dual;  <span class="comment">-- 30</span></span><br><span class="line"><span class="keyword">SELECT</span> TO_NUMBER(<span class="string">&#x27;abc&#x27;</span>) <span class="operator">+</span> <span class="number">10</span> <span class="keyword">FROM</span> dual; <span class="comment">-- 报错，要求是数字</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="string">&#x27;20&#x27;</span> <span class="operator">+</span> <span class="number">10</span> <span class="keyword">FROM</span> dual;  <span class="comment">-- 30</span></span><br></pre></td></tr></table></figure>



<h4 id="4、日期函数"><a href="#4、日期函数" class="headerlink" title="4、日期函数"></a>4、日期函数</h4><h5 id="获取当前系统时间-sysdate"><a href="#获取当前系统时间-sysdate" class="headerlink" title="获取当前系统时间 sysdate"></a>获取当前系统时间 sysdate</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> SYSDATE <span class="keyword">FROM</span> dual; <span class="comment">-- 2025-08-27 16:48:43</span></span><br><span class="line"></span><br><span class="line">mysql：<span class="keyword">SELECT</span> NOW();</span><br></pre></td></tr></table></figure>



<h5 id="加减月份计算"><a href="#加减月份计算" class="headerlink" title="加减月份计算"></a>加减月份计算</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> ADD_MONTHS(SYSDATE, <span class="number">1</span>) <span class="keyword">FROM</span> dual;  <span class="comment">-- +1月</span></span><br><span class="line"><span class="keyword">SELECT</span> ADD_MONTHS(SYSDATE, <span class="number">5</span>) <span class="keyword">FROM</span> dual;  <span class="comment">-- +的月份超过12，年份进1</span></span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 返回日期所在月份的最后一天</span></span><br><span class="line"><span class="keyword">SELECT</span> LAST_DAY(SYSDATE) <span class="keyword">FROM</span> dual;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询今年的2月份的天数</span></span><br><span class="line"><span class="keyword">SELECT</span> LAST_DAY(TO_DATE(<span class="string">&#x27;2025-02-01&#x27;</span>, <span class="string">&#x27;yyyy-mm-dd&#x27;</span>))  <span class="keyword">FROM</span> dual;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 返回两个时间中间的月份数</span></span><br><span class="line"><span class="keyword">SELECT</span> TRUNC(MONTHS_BETWEEN(SYSDATE, TO_DATE(<span class="string">&#x27;2003-01&#x27;</span>, <span class="string">&#x27;yyyy-mm&#x27;</span>)),<span class="number">2</span>) <span class="keyword">FROM</span> dual;</span><br></pre></td></tr></table></figure>




<h5 id="日期计算"><a href="#日期计算" class="headerlink" title="日期计算"></a>日期计算</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> SYSDATE <span class="operator">+</span> <span class="number">1</span> <span class="keyword">FROM</span> dual;</span><br><span class="line"><span class="keyword">SELECT</span> SYSDATE <span class="operator">-</span> <span class="number">3</span> <span class="keyword">FROM</span> dual;</span><br></pre></td></tr></table></figure>



<h4 id="5、其他函数"><a href="#5、其他函数" class="headerlink" title="5、其他函数"></a>5、其他函数</h4><h5 id="5-1-空值处理-NVL"><a href="#5-1-空值处理-NVL" class="headerlink" title="5.1 空值处理 NVL"></a>5.1 空值处理 NVL</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> tno,tname,sal<span class="operator">+</span>NVL(comm,<span class="number">0</span>) <span class="keyword">AS</span> &quot;薪水&quot; <span class="keyword">FROM</span> TEACHER;</span><br></pre></td></tr></table></figure>

<h5 id="5-2-decode"><a href="#5-2-decode" class="headerlink" title="5.2 decode"></a>5.2 <strong>decode</strong></h5><p>​	相当于mysql中case when<br><strong>语法</strong>：<br>  <code>decode(条件,值1,返回值1,值2,返回值2... 默认值)</code></p>
<p>  <strong>匹配不上返回默认值</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> DECODE(<span class="number">10</span>,  <span class="number">10</span>, <span class="string">&#x27;结果为10&#x27;</span>, <span class="number">20</span> , <span class="string">&#x27;结果为20&#x27;</span>, <span class="string">&#x27;没有结果&#x27;</span>) <span class="keyword">FROM</span> dual;  </span><br><span class="line"><span class="keyword">SELECT</span> DECODE(<span class="number">20</span>,  <span class="number">10</span>, <span class="string">&#x27;结果为10&#x27;</span>, <span class="number">20</span> , <span class="string">&#x27;结果为20&#x27;</span>, <span class="string">&#x27;没有结果&#x27;</span>) <span class="keyword">FROM</span> dual;</span><br><span class="line"><span class="keyword">SELECT</span> DECODE(<span class="number">30</span>,  <span class="number">10</span>, <span class="string">&#x27;结果为10&#x27;</span>, <span class="number">20</span> , <span class="string">&#x27;结果为20&#x27;</span>, <span class="string">&#x27;没有结果&#x27;</span>) <span class="keyword">FROM</span> dual; </span><br><span class="line">	<span class="comment">-- 没有匹配的，返回默认值</span></span><br></pre></td></tr></table></figure>



<h4 id="DECODE-函数的语法和作用是什么？与-CASE-WHEN-有何区别"><a href="#DECODE-函数的语法和作用是什么？与-CASE-WHEN-有何区别" class="headerlink" title="DECODE 函数的语法和作用是什么？与 CASE WHEN 有何区别?"></a>DECODE 函数的语法和作用是什么？与 CASE WHEN 有何区别?</h4><p>语法：<code>decode(条件,值1,返回值1,值2,返回值2... 默认值)</code><br>区别: decode 是 oracle 特有函数 ,  CASE WHEN 是 sql标准, 支持复杂逻辑(范围判断)</p>
<h3 id="五、plsql"><a href="#五、plsql" class="headerlink" title="五、plsql"></a>五、plsql</h3><p>plsql是oracle对SQL语言的过程化扩展</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DECLARE</span>   <span class="comment">-- 声明</span></span><br><span class="line">  说明部分(声明变量、游标(光标)、异常(意外))</span><br><span class="line"><span class="keyword">BEGIN</span>   <span class="comment">-- 开始</span></span><br><span class="line">  <span class="keyword">sql</span>语句序列(DML)</span><br><span class="line"></span><br><span class="line"><span class="keyword">END</span>;  <span class="comment">-- 结束</span></span><br></pre></td></tr></table></figure>



<h4 id="1、hello-world"><a href="#1、hello-world" class="headerlink" title="1、hello world"></a>1、hello world</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DECLARE</span> </span><br><span class="line">  <span class="comment">-- 声明</span></span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">  <span class="comment">-- 程序开始：可以写SQL语句、选择结构、循环结构...</span></span><br><span class="line"></span><br><span class="line">  dbms_output.put_line(<span class="string">&#x27;hello world&#x27;</span>);</span><br><span class="line"><span class="keyword">END</span>;</span><br></pre></td></tr></table></figure>



<h4 id="2、变量"><a href="#2、变量" class="headerlink" title="2、变量"></a>2、变量</h4><p>声明变量并赋值</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DECLARE</span> </span><br><span class="line">  <span class="comment">-- 先声明，后赋值</span></span><br><span class="line">  sname VARCHAR2(<span class="number">10</span>);</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">  <span class="comment">-- 在执行程序的过程中给变量赋值</span></span><br><span class="line">  sname :<span class="operator">=</span> <span class="string">&#x27;tom&#x27;</span>; </span><br><span class="line">  dbms_output.put_line(sname);</span><br><span class="line"><span class="keyword">END</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DECLARE</span> </span><br><span class="line">  <span class="comment">-- 初始化变量</span></span><br><span class="line">  sname VARCHAR2(<span class="number">10</span>) :<span class="operator">=</span><span class="string">&#x27;jack&#x27;</span>;</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">  dbms_output.put_line(sname);</span><br><span class="line"><span class="keyword">END</span>;</span><br></pre></td></tr></table></figure>

<p>将查询结果赋值给变量</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DECLARE</span> </span><br><span class="line">  <span class="comment">-- 声明变量</span></span><br><span class="line">  v_tname VARCHAR2(<span class="number">10</span>);</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">  <span class="keyword">SELECT</span> t.tname <span class="keyword">INTO</span> v_tname </span><br><span class="line">    <span class="keyword">FROM</span> TEACHER t <span class="keyword">WHERE</span> tno<span class="operator">=</span><span class="number">1002</span>;</span><br><span class="line">  dbms_output.put_line(<span class="string">&#x27;姓名是：&#x27;</span><span class="operator">||</span> v_tname);</span><br><span class="line"><span class="keyword">END</span>;</span><br></pre></td></tr></table></figure>




<h4 id="3、引用变量类型"><a href="#3、引用变量类型" class="headerlink" title="3、引用变量类型"></a>3、引用变量类型</h4><p>  在声明变量的时候引用表中<strong>某一个字段</strong>的数据类型<br>  <strong>语法</strong>：<code>变量名 表名.列名%type</code></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DECLARE</span> </span><br><span class="line">  <span class="comment">-- 声明变量</span></span><br><span class="line">  v_tname TEACHER.tname<span class="operator">%</span>type;</span><br><span class="line">  v_tno TEACHER.tno<span class="operator">%</span>type;</span><br><span class="line"></span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">  <span class="keyword">SELECT</span> t.tno, t.tname <span class="keyword">INTO</span> v_tno, v_tname </span><br><span class="line">    <span class="keyword">FROM</span> TEACHER t <span class="keyword">WHERE</span> tno<span class="operator">=</span><span class="number">1002</span>;</span><br><span class="line">  dbms_output.put_line(<span class="string">&#x27;编号：&#x27;</span><span class="operator">||</span>v_tno<span class="operator">||</span><span class="string">&#x27; 姓名：&#x27;</span><span class="operator">||</span>v_tname);</span><br><span class="line"><span class="keyword">END</span>;</span><br></pre></td></tr></table></figure>



<h4 id="4、记录变量类型"><a href="#4、记录变量类型" class="headerlink" title="4、记录变量类型"></a><strong>4、记录变量类型</strong></h4><p>  记录<strong>表中一行</strong>的类型<br>  <strong>语法</strong>：<code>变量名 表名%rowtype;</code></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DECLARE</span></span><br><span class="line">  p EMP<span class="operator">%</span>rowtype; <span class="comment">-- 声明变量p，表示一行中的任意一个记录</span></span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">  <span class="comment">-- 将一行数据赋值给变量p</span></span><br><span class="line">  <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">INTO</span> p <span class="keyword">FROM</span> EMP <span class="keyword">WHERE</span> empno<span class="operator">=</span><span class="number">7369</span>;</span><br><span class="line">  dbms_output.put_line(p.empno <span class="operator">||</span> <span class="string">&#x27;,&#x27;</span> <span class="operator">||</span> p.ename<span class="operator">||</span><span class="string">&#x27;,&#x27;</span><span class="operator">||</span> p.sal);</span><br><span class="line"><span class="keyword">END</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 从一行数据中筛选部分字段 赋值给变量p</span></span><br><span class="line"><span class="comment">--   SELECT e.ename, e.job INTO p FROM EMP e  WHERE e.empno=7369;</span></span><br><span class="line"><span class="comment">--   dbms_output.put_line(p.ename);</span></span><br></pre></td></tr></table></figure>




<h4 id="5、if选择结构"><a href="#5、if选择结构" class="headerlink" title="5、if选择结构"></a>5、if选择结构</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DECLARE</span></span><br><span class="line">  v_num NUMBER :<span class="operator">=</span><span class="number">2</span>;</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">  IF v_num <span class="operator">&gt;</span> <span class="number">5</span></span><br><span class="line">      <span class="keyword">THEN</span> dbms_output.put_line(v_num<span class="operator">||</span><span class="string">&#x27;大于5&#x27;</span>);</span><br><span class="line">    <span class="keyword">ELSE</span> dbms_output.put_line(v_num<span class="operator">||</span><span class="string">&#x27;不大于5&#x27;</span>);</span><br><span class="line">  <span class="keyword">END</span> IF;</span><br><span class="line"><span class="keyword">END</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DECLARE</span></span><br><span class="line">  v_num NUMBER :<span class="operator">=</span><span class="number">2</span>;</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">  IF v_num <span class="operator">&gt;</span> <span class="number">5</span></span><br><span class="line">      <span class="keyword">THEN</span> dbms_output.put_line(v_num<span class="operator">||</span><span class="string">&#x27;大于5&#x27;</span>);</span><br><span class="line">    ELSIF v_num <span class="operator">&lt;</span> <span class="number">5</span></span><br><span class="line">      <span class="keyword">THEN</span> dbms_output.put_line(v_num<span class="operator">||</span><span class="string">&#x27;小于5&#x27;</span>);</span><br><span class="line">    </span><br><span class="line"><span class="keyword">ELSE</span> dbms_output.put_line(v_num<span class="operator">||</span><span class="string">&#x27;等于5&#x27;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">END</span> IF;</span><br><span class="line"><span class="keyword">END</span>;</span><br></pre></td></tr></table></figure>



<h4 id="6、循环结构"><a href="#6、循环结构" class="headerlink" title="6、循环结构"></a>6、循环结构</h4><p><strong>loop</strong>循环<br><strong>语法</strong>：<br><code>loop</code></p>
<p>  <code>exit when 退出条件;</code></p>
<p><code>end loop;</code></p>
<p>循环打印 1~5 数字</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DECLARE</span></span><br><span class="line">  v_num NUMBER :<span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">  LOOP</span><br><span class="line">      IF v_num<span class="operator">&gt;</span><span class="number">5</span> <span class="keyword">THEN</span></span><br><span class="line">        EXIT;</span><br><span class="line">      <span class="keyword">END</span> IF;</span><br><span class="line">  dbms_output.put_line(v_num);</span><br><span class="line">  v_num :<span class="operator">=</span> v_num <span class="operator">+</span> <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">END</span> LOOP;</span><br><span class="line"><span class="keyword">END</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DECLARE</span></span><br><span class="line">  v_num NUMBER :<span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line"> LOOP</span><br><span class="line">    EXIT <span class="keyword">WHEN</span> v_num <span class="operator">&gt;</span> <span class="number">5</span>;</span><br><span class="line"></span><br><span class="line">	dbms_output.put_line(v_num);</span><br><span class="line">	v_num :<span class="operator">=</span> v_num <span class="operator">+</span> <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">END</span> LOOP;</span><br><span class="line"><span class="keyword">END</span>;</span><br></pre></td></tr></table></figure>

<p>求和：从1开始累加，当和不大于20，输出最后一个数值<br>1+2+3+4+5+6   – 5</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DECLARE</span></span><br><span class="line"> v_sum NUMBER :<span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"> i NUMBER :<span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line"> LOOP</span><br><span class="line">  v_sum :<span class="operator">=</span> v_sum <span class="operator">+</span> i;   <span class="comment">-- 2  4  7 11  16  22</span></span><br><span class="line"></span><br><span class="line">exit <span class="keyword">when</span> v_sum <span class="operator">&gt;</span> <span class="number">20</span>;</span><br><span class="line"></span><br><span class="line">  i :<span class="operator">=</span> i <span class="operator">+</span> <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">END</span> LOOP;</span><br><span class="line"></span><br><span class="line"> dbms_output.put_line(i <span class="operator">-</span> <span class="number">1</span>);</span><br><span class="line"><span class="keyword">END</span>;</span><br><span class="line">    <span class="comment">-- 输出5</span></span><br></pre></td></tr></table></figure>



<h4 id="7、游标-Cursor"><a href="#7、游标-Cursor" class="headerlink" title="7、游标 Cursor"></a>7、游标 <strong>Cursor</strong></h4><p>类似java集合<br>声明语法：<br><code>cursor 游标名 is select语句</code></p>
<blockquote>
<p>  <strong>%found</strong>：检验游标是否成功，通常在fetch语句前使用，<br>         当游标按照条件查询出一条结果，返回true<br>  <strong>%isopen</strong>：判断游标是否处于打开状态，试图打开一个已经打开的游标，将会出错<br>  <strong>%notfound</strong>：与%found相反，当按照条件无法查询到记录时，返回true<br>  <strong>%rowcount</strong>：循环执行游标读取数据时，返回检索出的记录数据的行数</p>
</blockquote>
<p>使用步骤：<br>(1)打开游标<br>(2)循环取值<br>(3)关闭游标</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DECLARE</span></span><br><span class="line">  <span class="comment">-- 声明游标</span></span><br><span class="line">  <span class="keyword">CURSOR</span> cur_teacher <span class="keyword">IS</span> <span class="keyword">SELECT</span> tno,tname,sal <span class="keyword">FROM</span> teacher;</span><br><span class="line"></span><br><span class="line">  v_tno teacher.tno<span class="operator">%</span>type;</span><br><span class="line">  v_tname teacher.tname<span class="operator">%</span>type;</span><br><span class="line">  v_sal teacher.sal<span class="operator">%</span>type;</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">  <span class="comment">-- 打开游标</span></span><br><span class="line">  <span class="keyword">OPEN</span> cur_teacher;</span><br><span class="line">   <span class="comment">-- 循环取值</span></span><br><span class="line">    LOOP</span><br><span class="line">      <span class="keyword">FETCH</span> cur_teacher <span class="keyword">INTO</span> v_tno,v_tname,v_sal;    </span><br><span class="line">      EXIT <span class="keyword">WHEN</span> cur_teacher<span class="operator">%</span>notfound; <span class="comment">-- 取不到值，退出循环</span></span><br><span class="line"></span><br><span class="line">		dbms_output.put_line(v_tno<span class="operator">||</span><span class="string">&#x27;-&#x27;</span><span class="operator">||</span>v_tname<span class="operator">||</span><span class="string">&#x27;-&#x27;</span><span class="operator">||</span>v_sal);</span><br><span class="line">	<span class="keyword">END</span> LOOP;</span><br><span class="line">  <span class="comment">-- 关闭游标</span></span><br><span class="line">  <span class="keyword">CLOSE</span> cur_teacher;</span><br><span class="line"><span class="keyword">END</span>;</span><br><span class="line"><span class="comment">-- 输出</span></span><br><span class="line"><span class="comment">-- 1056-杨晓磊-20812.41</span></span><br><span class="line"><span class="comment">-- 1057-黄芳菊-12711.46</span></span><br><span class="line"><span class="comment">-- 1058-李红勤-21119.95   ...</span></span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DECLARE</span></span><br><span class="line">  <span class="keyword">CURSOR</span> cur_teacher <span class="keyword">IS</span> <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> teacher; <span class="comment">-- 查询所有字段</span></span><br><span class="line">  v_teacher teacher<span class="operator">%</span>rowtype; <span class="comment">-- 使用一个变量接收一行数据</span></span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">  <span class="keyword">OPEN</span> cur_teacher;</span><br><span class="line">  LOOP</span><br><span class="line">    <span class="keyword">FETCH</span> cur_teacher <span class="keyword">INTO</span> v_teacher;    </span><br><span class="line">	EXIT <span class="keyword">WHEN</span> cur_teacher<span class="operator">%</span>notfound; <span class="comment">-- 取不到值，退出循环</span></span><br><span class="line"></span><br><span class="line">	dbms_output.put_line(v_teacher.tno <span class="operator">||</span> <span class="string">&#x27;-&#x27;</span> <span class="operator">||</span> v_teacher.tname<span class="operator">||</span><span class="string">&#x27;-&#x27;</span><span class="operator">||</span> v_teacher.sal);</span><br><span class="line">  <span class="keyword">END</span> LOOP;   </span><br><span class="line">  <span class="keyword">CLOSE</span> cur_teacher;</span><br><span class="line"><span class="keyword">END</span>;</span><br></pre></td></tr></table></figure>

<p><strong>声明有参数的游标</strong><br>语法：<br><code>cursor 游标名(参数名 参数类型) is select语句</code></p>
<p>打印输出20号部门的员工信息</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DECLARE</span></span><br><span class="line">  <span class="keyword">cursor</span> cur_emp(v_deptno emp.deptno<span class="operator">%</span>type) <span class="keyword">IS</span></span><br><span class="line">    <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> deptno<span class="operator">=</span>v_deptno;</span><br><span class="line">  <span class="comment">-- 声明变量接收一行数据 </span></span><br><span class="line">  v_emp emp<span class="operator">%</span>rowtype;</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">  <span class="comment">-- 打开游标，传递参数</span></span><br><span class="line">  <span class="keyword">OPEN</span> cur_emp(<span class="number">20</span>);</span><br><span class="line"></span><br><span class="line">  LOOP</span><br><span class="line">    <span class="keyword">FETCH</span> cur_emp <span class="keyword">INTO</span> v_emp; <span class="comment">-- 循环取值</span></span><br><span class="line">	EXIT <span class="keyword">WHEN</span> cur_emp<span class="operator">%</span>notfound; </span><br><span class="line">	dbms_output.put_line(v_emp.empno <span class="operator">||</span> <span class="string">&#x27;-&#x27;</span> <span class="operator">||</span> v_emp.ename<span class="operator">||</span><span class="string">&#x27;-&#x27;</span><span class="operator">||</span> v_emp.deptno);</span><br><span class="line">  <span class="keyword">END</span> LOOP;</span><br><span class="line">  <span class="keyword">CLOSE</span> cur_emp;</span><br><span class="line"><span class="keyword">END</span>;</span><br><span class="line"><span class="comment">-- 输出</span></span><br><span class="line"><span class="comment">-- 7369-SMITH-20</span></span><br><span class="line"><span class="comment">-- 7566-JONES-20</span></span><br><span class="line"><span class="comment">-- 7788-SCOTT-20</span></span><br><span class="line"><span class="comment">-- 7876-ADAMS-20</span></span><br><span class="line"><span class="comment">-- 7902-FORD-20</span></span><br></pre></td></tr></table></figure>

<p><strong>练习</strong>：<br>为emp表员工涨工资，从最低工资开始调整每人涨10%，但是工资总和不能超过5万<br>计算涨工资人数 和 涨工资后的工资总和，并输出</p>
<h4 id="8、异常-Exception"><a href="#8、异常-Exception" class="headerlink" title="8、异常 Exception"></a>8、异常 <strong>Exception</strong></h4><p>异常(例外)语法：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DECLARE</span></span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">  <span class="comment">-- 业务逻辑</span></span><br><span class="line">  <span class="comment">-- 异常</span></span><br><span class="line">  exception</span><br><span class="line">    <span class="comment">-- 异常处理</span></span><br><span class="line">    <span class="keyword">when</span> 异常<span class="number">1</span> <span class="keyword">then</span> 异常处理语句<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">when</span> 异常<span class="number">2</span> <span class="keyword">then</span> 异常处理语句<span class="number">2</span>;</span><br><span class="line">    <span class="keyword">when</span> 异常<span class="number">3</span> <span class="keyword">then</span> 异常处理语句<span class="number">3</span>;</span><br><span class="line">    <span class="keyword">when</span> others <span class="keyword">then</span> 处理其他异常语句;</span><br><span class="line"><span class="keyword">END</span>;</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>常见异常</strong>：<br><strong>zero_divide</strong> 除零异常<br><strong>value_error</strong> 类型转换异常<br><strong>too_many_rows</strong> 查询出多条记录，赋值给一行记录的变量<br><strong>no_data_found</strong> 没有找到数据</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DECLARE</span></span><br><span class="line"> a NUMBER;</span><br><span class="line"></span><br><span class="line"> v_emp emp<span class="operator">%</span>rowtype;  <span class="comment">-- 保存一行记录</span></span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line"> <span class="comment">-- 业务逻辑</span></span><br><span class="line"> <span class="comment">-- a := 10 / 0;</span></span><br><span class="line"> <span class="comment">-- a := &#x27;张三&#x27;;</span></span><br><span class="line"></span><br><span class="line"> <span class="comment">-- select * into v_emp from emp;</span></span><br><span class="line"> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">into</span> v_emp <span class="keyword">from</span> emp <span class="keyword">where</span> empno <span class="operator">=</span> <span class="number">321</span>;</span><br><span class="line"></span><br><span class="line"> exception </span><br><span class="line">  <span class="keyword">when</span> zero_divide <span class="keyword">then</span> </span><br><span class="line">    dbms_output.put_line(<span class="string">&#x27;除零异常...&#x27;</span>);</span><br><span class="line">    </span><br><span class="line">  <span class="keyword">when</span> value_error <span class="keyword">then</span> </span><br><span class="line">    dbms_output.put_line(<span class="string">&#x27;类型转换异常...&#x27;</span>);</span><br><span class="line">    </span><br><span class="line">  <span class="keyword">when</span> too_many_rows <span class="keyword">then</span> </span><br><span class="line">    dbms_output.put_line(<span class="string">&#x27;多行记录异常...&#x27;</span>);</span><br><span class="line">    </span><br><span class="line">  <span class="keyword">when</span> others <span class="keyword">then</span> </span><br><span class="line">    dbms_output.put_line(<span class="string">&#x27;其它异常...&#x27;</span> <span class="operator">||</span> sqlerrm );  <span class="comment">-- sqlerrm 接收错误信息</span></span><br><span class="line"><span class="keyword">END</span>;</span><br></pre></td></tr></table></figure>



<h4 id="9、存储过程-Procedure"><a href="#9、存储过程-Procedure" class="headerlink" title="9、存储过程 Procedure"></a>9、存储过程 Procedure</h4><p><strong>语法</strong>：<br>or replace-存在就替换，不存在就创建</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> [<span class="keyword">or</span> replace] <span class="keyword">procedure</span> 存储过程名(参数 <span class="keyword">in</span> <span class="operator">|</span> <span class="keyword">out</span> 参数类型...)</span><br><span class="line"><span class="keyword">is</span> <span class="operator">|</span> <span class="keyword">as</span></span><br><span class="line">  <span class="comment">-- 声明部分</span></span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  <span class="comment">-- 业务逻辑</span></span><br><span class="line"><span class="keyword">end</span>;</span><br></pre></td></tr></table></figure>

<p>调用方式一：<br><code>call 存储过程名();</code></p>
<p>调用方式二：<br><code>DECLARE</code><br><code>BEGIN</code><br>  <code>存储过程名();</code><br><code>END;</code></p>
<p>需求：给指定员工涨薪，并打印涨薪前和涨薪后的薪资</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">OR</span> REPLACE <span class="keyword">PROCEDURE</span> pro_update_sal(</span><br><span class="line">v_empno <span class="keyword">IN</span> emp.empno<span class="operator">%</span>type, <span class="comment">-- 给谁涨工资</span></span><br><span class="line">v_money <span class="keyword">IN</span> NUMBER <span class="comment">-- 涨多少(注意：参数不能指定精度，如NUMBER(5,2)错误)</span></span><br><span class="line">)</span><br><span class="line"><span class="keyword">IS</span> </span><br><span class="line">  v_sal emp.sal<span class="operator">%</span>type;</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">  <span class="comment">-- 记录原来的薪资</span></span><br><span class="line">  <span class="keyword">SELECT</span> sal <span class="keyword">INTO</span> v_sal <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> empno<span class="operator">=</span>v_empno;</span><br><span class="line">  <span class="comment">-- 输出更新前的薪资</span></span><br><span class="line">  dbms_output.put_line(<span class="string">&#x27;原来的薪资：&#x27;</span> <span class="operator">||</span> v_sal);</span><br><span class="line"></span><br><span class="line">  <span class="comment">-- 更新工资</span></span><br><span class="line">  <span class="keyword">UPDATE</span> emp <span class="keyword">SET</span> sal <span class="operator">=</span> sal <span class="operator">+</span> v_money <span class="keyword">WHERE</span> empno <span class="operator">=</span> v_empno;</span><br><span class="line">  <span class="comment">-- 输出更新后的薪资</span></span><br><span class="line">  dbms_output.put_line(<span class="string">&#x27;更新后的薪资：&#x27;</span> <span class="operator">||</span> (v_sal<span class="operator">+</span>v_money));</span><br><span class="line"></span><br><span class="line">  <span class="keyword">COMMIT</span>; </span><br><span class="line"><span class="keyword">END</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CALL</span> pro_update_sal(<span class="number">7521</span>,<span class="number">1000.00</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line"> pro_update_sal(<span class="number">7369</span>, <span class="number">1000.00</span>);</span><br><span class="line"><span class="keyword">END</span>;</span><br></pre></td></tr></table></figure>



<h4 id="10、触发器-Trigger"><a href="#10、触发器-Trigger" class="headerlink" title="10、触发器 Trigger"></a>10、触发器 Trigger</h4><p>当用户执行了 INSERT|UPDATE|DELETE操作，可以触发一系列的其他动作</p>
<p><strong>语法</strong>；</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> [<span class="keyword">or</span> replace] <span class="keyword">trigger</span> 触发器名</span><br><span class="line">before <span class="operator">|</span> after <span class="comment">-- 触发时机</span></span><br><span class="line"><span class="keyword">insert</span> <span class="operator">|</span> <span class="keyword">update</span> <span class="operator">|</span> <span class="keyword">delete</span> <span class="comment">-- 触发事件</span></span><br><span class="line"><span class="keyword">on</span> 表名</span><br><span class="line">[<span class="keyword">for</span> <span class="keyword">each</span> <span class="type">row</span>] <span class="comment">-- 触发类型（语句级触发器 和  行级触发器）</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">DECLARE</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">END</span>;</span><br></pre></td></tr></table></figure>

<p>触发器的<strong>类型</strong>：<br>(1)语句级触发器：在指定的操作语句 之前或之后执行一次，不管这条语句影响多少行<br>(2)行级触发器(<code>for each row</code>)：触发语句作用的每一条记录都被触发<br>– 在行级触发器中 使用old 和new关键字获取原来的值和新值</p>
<p>new 使用语法：  获取新的薪资 <code>:new.sal</code><br>old 使用语法：  获取旧薪资 <code>:old.sal</code></p>
<p>插入员工之后，输出：欢迎新员工入职</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">OR</span> REPLACE <span class="keyword">TRIGGER</span> tri_welcome</span><br><span class="line">AFTER <span class="keyword">INSERT</span> <span class="keyword">ON</span> emp</span><br><span class="line"><span class="keyword">DECLARE</span> </span><br><span class="line"></span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">  dbms_output.put_line(<span class="string">&#x27;欢迎你，菜鸟&#x27;</span> );</span><br><span class="line"><span class="keyword">END</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT INTO</span> emp(empno,ename) <span class="keyword">VALUES</span>(<span class="number">6666</span>,<span class="string">&#x27;蔡徐坤&#x27;</span>);</span><br></pre></td></tr></table></figure>

<p><strong>触发器中抛出异常</strong><br>使用触发器实现<strong>数据校验</strong></p>
<p>需求：非工作日不能插入员工信息</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">OR</span> REPLACE <span class="keyword">TRIGGER</span> tri_add_emp</span><br><span class="line">BEFORE <span class="keyword">INSERT</span> <span class="keyword">ON</span> emp</span><br><span class="line"><span class="keyword">DECLARE</span> </span><br><span class="line">  v_day VARCHAR2(<span class="number">10</span>); <span class="comment">-- 变量保存当前星期</span></span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">  <span class="keyword">SELECT</span> TO_CHAR(SYSDATE,<span class="string">&#x27;day&#x27;</span>) <span class="keyword">INTO</span> v_day <span class="keyword">FROM</span> dual;</span><br><span class="line">  <span class="comment">-- 判断周几</span></span><br><span class="line">  IF v_day <span class="operator">=</span><span class="string">&#x27;星期四&#x27;</span> <span class="keyword">THEN</span></span><br><span class="line">    dbms_output.put_line(<span class="string">&#x27;周末不能添加员工！！！&#x27;</span>);</span><br><span class="line">    <span class="comment">-- 抛出异常，让系统崩溃，这样数据就不会提交</span></span><br><span class="line">    raise_application_error(<span class="number">-20001</span>,<span class="string">&#x27;周末不能办理入职！！！&#x27;</span>);</span><br><span class="line">  <span class="keyword">END</span> IF;</span><br><span class="line"><span class="keyword">END</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT INTO</span> emp(empno, ename) <span class="keyword">values</span> (<span class="number">7791</span>, <span class="string">&#x27;lancy&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> emp(empno,ename) <span class="keyword">VALUES</span>(<span class="number">1586</span>,<span class="string">&#x27;马嘉祺&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> TO_CHAR(SYSDATE,<span class="string">&#x27;day&#x27;</span>) <span class="keyword">FROM</span> dual;</span><br></pre></td></tr></table></figure>



<h4 id="11、视图-View"><a href="#11、视图-View" class="headerlink" title="11、视图 View"></a>11、视图 View</h4><p>创建一个视图，展示教师姓名和部门名称</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">OR</span> REPLACE <span class="keyword">VIEW</span> vi_teacher <span class="keyword">AS</span> </span><br><span class="line"><span class="keyword">SELECT</span> t.tno, t.tname, NVL(d.dname,<span class="string">&#x27;其他部门&#x27;</span>) &quot;部门名称&quot;</span><br><span class="line"><span class="keyword">FROM</span> teacher t <span class="keyword">LEFT</span> <span class="keyword">JOIN</span> dept d <span class="keyword">ON</span> t.deptno<span class="operator">=</span>d.deptno;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> vi_teacher;</span><br><span class="line"></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">VIEW</span> vi_teacher;</span><br></pre></td></tr></table></figure>



<h4 id="12、同义词-Synonym"><a href="#12、同义词-Synonym" class="headerlink" title="12、同义词 Synonym"></a>12、同义词 <strong>Synonym</strong></h4><p>同义词的目的是为了简化对目标对象的访问<br><strong>语法</strong>：<br><code>CREATE [public] SYNONYM 同义词名 FOR 对象;</code></p>
<p><strong>公用</strong>同义词：所有用户都能访问<br><strong>私有</strong>同义词：只有创建的用户才能访问</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> PUBLIC SYNONYM tea <span class="keyword">FOR</span> teacher; <span class="comment">-- 公用同义词</span></span><br><span class="line"><span class="keyword">CREATE</span> SYNONYM myemp <span class="keyword">FOR</span> emp; <span class="comment">-- 私有同义词</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> tea;</span><br></pre></td></tr></table></figure>



<h4 id="13、序列-sequence"><a href="#13、序列-sequence" class="headerlink" title="13、序列 sequence"></a>13、序列 <strong>sequence</strong></h4><p>序列 <code>sequence</code>：是 oracle 提供的用于产生一系列<strong>唯一数字</strong>的数据库对象</p>
<p><strong>创建语法</strong>：</p>
<blockquote>
<p>​	<code>create sequence 序列名称</code>   –创建序列</p>
<ul>
<li>[start with n] –序列的起始值 (递增默认是 minvalue, 递减默认 maxvalue)</li>
<li>[increment by n]; –递增的序列值</li>
</ul>
</blockquote>
<p>注意：名称一般以 <code>sq_</code> 开头</p>
<p><strong>使用序列</strong>：</p>
<ul>
<li>序列名.currval – 查询当前值</li>
<li>序列名.nextval – 获取下一个值</li>
</ul>
<p><strong>注意：第一次使用序列，必须使用 nextval</strong></p>
<h5 id="创建序列-1"><a href="#创建序列-1" class="headerlink" title="创建序列"></a>创建序列</h5><p>  创建 起始值为1001，每次递增1的序列</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> sequence sq_teacher</span><br><span class="line"><span class="keyword">START</span> <span class="keyword">WITH</span> <span class="number">1001</span></span><br><span class="line">INCREMENT <span class="keyword">BY</span> <span class="number">1</span>; <span class="comment">-- 默认为1 可以不写</span></span><br></pre></td></tr></table></figure>

<p>调用序列：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> sq_teacher.nextval <span class="keyword">FROM</span> dual;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> sq_teacher.currval <span class="keyword">FROM</span> dual;</span><br></pre></td></tr></table></figure>





<p>– 练习 游标：<br>– 需求：为 emp 表员工涨工资，从最低工资开始调整没人涨10%，但是工资总额不能超过 5 万<br>– 计算涨工资人数 和 涨工资后的工资总额，并输出</p>
<p>– 练习  触发器：<br>– 需求：判断 员工涨薪后的薪资 必须大于 涨薪前的薪资<br>– 如果小于，抛出异常</p>
<p>update emp  set sal &#x3D; sal + 1000 where empno &#x3D; 7369;  – ok<br>update emp  set sal &#x3D; sal - 1000 where empno &#x3D; 7369;  – 没门的</p>
<p>– 练习：触发器<br>– 需求：使用 触发器实现 模拟 mysql 的主键自增效果</p>
<p>insert into dept(deptno, dname, loc) VALUES (序列.nextval,  ‘招生部’, ‘江软’);</p>
<p>insert into dept VALUES (null,  ‘招生部’, ‘江软’);<br>insert into dept(dname, loc) VALUES (‘招生部’, ‘江软’);</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://ningxiu2978.github.io">NINGXIU</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://ningxiu2978.github.io/2025/09/18/Oracle%E7%AC%94%E8%AE%B0(%E6%80%BB)/">https://ningxiu2978.github.io/2025/09/18/Oracle%E7%AC%94%E8%AE%B0(%E6%80%BB)/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="https://ningxiu2978.github.io" target="_blank">NINGXIU's 学习博客</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Oracle/">Oracle</a></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/2025/09/18/%E6%95%B0%E6%8D%AE%E5%BA%93%E9%9D%A2%E8%AF%95%E9%A2%98/" title="MySQL面试题"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">MySQL面试题</div></div><div class="info-2"><div class="info-item-1">07281.数据库的分类有哪些？（谈谈你知道的数据库？）分为关系型数据库(RDBMS)、非关系型数据库(NoSQL) 关系型数据库(RDBMS)，是建立在关系模型基础上，由多张相互连接的二维表组成的数据库。 关系型数据库数据之间的关系性强，查询同类信息快，存储的数据结构可以很复杂。  常见的关系型数据库：mysql、oracle、db2、sql server  非关系型数据库(NoSQL)：Not-Only SQL ，泛指非关系型数据库，是对关系型数据库的补充。 非关系型数据库数据之间可以没有关系，结构简单更容易扩展，在大量数据的情况下，读写性能优秀  常见的非关系型数据库：Redis、MongoDB  2.sql的分类？（分别是做什么的、关键字？）sql是操作数据库的一种语言 DDL数据定义语言、DML数据操作语言、DQL数据查询语言、DCL数据控制语言 DDL，操作数据库、表、列等，常用语句：CREATE、 ALTER、DROP DML，操作数据库中表里的数据；常用语句：INSERT、 UPDATE、 DELETE DQL，查询数据 常用语句：SELECT DCL，操作访问权...</div></div></div></a><a class="pagination-related" href="/2025/09/18/MySQL%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0(%E6%80%BB)/" title="MySQl学习笔记(总)"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">MySQl学习笔记(总)</div></div><div class="info-2"><div class="info-item-1">数据库（DataBase）：数据库(简称DB)是长期储存在计算机内、有组织的、可共享的大量数据的集合。 数据库中存储的基本对象是数据(Data)数据库的基本特点：永久存储、有组织、可共享 数据库管理系统（DataBase Management System）：DBMS，位于用户与操作系统之间的一层数据管理软件。（是系统软件，是数据库系统的核心） 主要功能：  数据定义功能 数据组织、存储和管理 数据操纵功能（插入、删除、修改和查询） 数据库的事务管理和运行管理 数据库的建立和维护功能(实用程序) 其它功能（异构数据库之间的互访等）  数据库系统（DataBase System） 数据库系统（DBS）： 计算机系统中引入数据库后的系统构成 数据库系统的构成：由数据库、数据库管理系统、应用系统、应用开发工具、用户、应用程序员、数据库管理员（Database Administrator，DBA）等组成 。  数据库分类： 关系型数据库(RDBMS)：关系型数据库，是建立在关系模型基础上，由多张相互连接的二维表组成的数据库。  特点： 使用表存储数据，格式统一(行列），便于维护 使用SQ...</div></div></div></a></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/img/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">NINGXIU</div><div class="author-info-description"></div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">11</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">8</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">4</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/NingXIU2978"><i class="fab fa-github"></i><span>关注我</span></a><div class="card-info-social-icons"><a class="social-icon" href="https://github.com/NingXIU2978" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a><a class="social-icon" href="/georgelester10611@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #4a7dbe;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">这是我的博客,欢迎各位大佬莅临！！！</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BB%8B%E7%BB%8D"><span class="toc-number">1.</span> <span class="toc-text">数据库介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%E3%80%81%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BB%8B%E7%BB%8D"><span class="toc-number">1.1.</span> <span class="toc-text">1、数据库介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-1-%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">1.1.1.</span> <span class="toc-text">1.1 数据库</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#1-2-%E6%95%B0%E6%8D%AE%E5%BA%93%E8%A7%84%E8%8C%83"><span class="toc-number">1.1.2.</span> <span class="toc-text">1.2 数据库规范</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#1-3-%E5%B8%B8%E7%94%A8%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">1.1.3.</span> <span class="toc-text">1.3 常用数据库</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#1-4-%E6%95%B0%E6%8D%AE%E5%BA%93%E5%88%86%E7%B1%BB"><span class="toc-number">1.1.4.</span> <span class="toc-text">1.4 数据库分类</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E3%80%81Oracle%E4%BB%8B%E7%BB%8D"><span class="toc-number">1.2.</span> <span class="toc-text">2 、Oracle介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#2-1-Oracle-Database"><span class="toc-number">1.2.1.</span> <span class="toc-text">2.1 Oracle Database</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-2-Oracle%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">1.2.2.</span> <span class="toc-text">2.2 Oracle数据库</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-3-Oracle%E5%AE%9E%E4%BE%8B"><span class="toc-number">1.2.3.</span> <span class="toc-text">2.3 Oracle实例</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-4-%E8%A1%A8%E7%A9%BA%E9%97%B4"><span class="toc-number">1.2.4.</span> <span class="toc-text">2.4 表空间</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-5-%E7%94%A8%E6%88%B7"><span class="toc-number">1.2.5.</span> <span class="toc-text">2.5 用户</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-6-%E6%9D%83%E9%99%90"><span class="toc-number">1.2.6.</span> <span class="toc-text">2.6 权限</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-7-%E8%A7%92%E8%89%B2"><span class="toc-number">1.2.7.</span> <span class="toc-text">2.7 角色</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-8-%E8%A1%A8"><span class="toc-number">1.2.8.</span> <span class="toc-text">2.8 表</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-9-%E6%95%B0%E6%8D%AE%E6%96%87%E4%BB%B6"><span class="toc-number">1.2.9.</span> <span class="toc-text">2.9 数据文件</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80%E3%80%81DDL"><span class="toc-number">2.</span> <span class="toc-text">一、DDL</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1%E3%80%81%E5%88%9B%E5%BB%BA%E8%A1%A8%E7%A9%BA%E9%97%B4"><span class="toc-number">2.0.1.</span> <span class="toc-text">1、创建表空间</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E8%A1%A8%E7%A9%BA%E9%97%B4"><span class="toc-number">2.0.2.</span> <span class="toc-text">删除表空间</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2%E3%80%81%E5%88%9B%E5%BB%BA%E7%94%A8%E6%88%B7"><span class="toc-number">2.0.3.</span> <span class="toc-text">2、创建用户</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3%E3%80%81%E5%88%86%E9%85%8D%E6%9D%83%E9%99%90"><span class="toc-number">2.0.4.</span> <span class="toc-text">3、分配权限</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4%E3%80%81%E5%88%9B%E5%BB%BAteacher%E8%A1%A8"><span class="toc-number">2.0.5.</span> <span class="toc-text">4、创建teacher表</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#5%E3%80%81%E6%B7%BB%E5%8A%A0%E4%B8%BB%E9%94%AE%E7%BA%A6%E6%9D%9F"><span class="toc-number">2.0.6.</span> <span class="toc-text">5、添加主键约束</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#6%E3%80%81%E5%88%A0%E9%99%A4%E7%BA%A6%E6%9D%9F"><span class="toc-number">2.0.7.</span> <span class="toc-text">6、删除约束</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#7%E3%80%81%E6%B7%BB%E5%8A%A0%E6%A3%80%E6%9F%A5%E7%BA%A6%E6%9D%9F"><span class="toc-number">2.0.8.</span> <span class="toc-text">7、添加检查约束</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#8%E3%80%81%E5%88%9B%E5%BB%BA%E8%A1%A8%E7%9A%84%E6%97%B6%E5%80%99%E6%B7%BB%E5%8A%A0-%E7%BA%A6%E6%9D%9F"><span class="toc-number">2.0.9.</span> <span class="toc-text">8、创建表的时候添加 约束</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#9%E3%80%81drop%EF%BC%8Ctruncate%EF%BC%8Cdelete"><span class="toc-number">2.0.10.</span> <span class="toc-text">9、drop，truncate，delete</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#oracle-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="toc-number">2.1.</span> <span class="toc-text">oracle 数据类型</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1%E3%80%81%E5%AD%97%E7%AC%A6%E5%9E%8B"><span class="toc-number">2.1.1.</span> <span class="toc-text">1、字符型</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2%E3%80%81%E6%95%B0%E5%80%BC%E7%B1%BB%E5%9E%8B"><span class="toc-number">2.1.2.</span> <span class="toc-text">2、数值类型</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3%E3%80%81%E6%97%A5%E6%9C%9F%E7%B1%BB%E5%9E%8B"><span class="toc-number">2.1.3.</span> <span class="toc-text">3、日期类型</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4%E3%80%81lob%E7%B1%BB%E5%9E%8B"><span class="toc-number">2.1.4.</span> <span class="toc-text">4、lob类型</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8C%E3%80%81DML"><span class="toc-number">3.</span> <span class="toc-text">二、DML</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%E3%80%81%E5%BA%8F%E5%88%97"><span class="toc-number">3.1.</span> <span class="toc-text">1、序列</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E5%BA%8F%E5%88%97"><span class="toc-number">3.1.1.</span> <span class="toc-text">创建序列</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%E3%80%81dual-%E8%99%9A%E6%8B%9F%E8%A1%A8"><span class="toc-number">3.2.</span> <span class="toc-text">2、dual 虚拟表</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3%E3%80%81INSERT"><span class="toc-number">3.3.</span> <span class="toc-text">3、INSERT</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4%E3%80%81update"><span class="toc-number">3.4.</span> <span class="toc-text">4、update</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5%E3%80%81delete"><span class="toc-number">3.5.</span> <span class="toc-text">5、delete</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%89%E3%80%81DQL"><span class="toc-number">4.</span> <span class="toc-text">三、DQL</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#DQL%EF%BC%9A%E6%9F%A5%E8%AF%A2%E8%AF%AD%E5%8F%A5"><span class="toc-number">4.1.</span> <span class="toc-text">DQL：查询语句</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1%E3%80%81%E5%9F%BA%E7%A1%80%E6%9F%A5%E8%AF%A2"><span class="toc-number">4.2.</span> <span class="toc-text">1、基础查询</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%E3%80%81AS%E8%AF%AD%E5%8F%A5-%E5%8D%95%E5%BC%95%E5%8F%B7-%E5%92%8C-%E5%8F%8C%E5%BC%95%E5%8F%B7%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">4.3.</span> <span class="toc-text">2、AS语句 + 单引号 和 双引号的区别</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3%E3%80%81%E5%8E%BB%E9%87%8D%EF%BC%9ADISTINCT"><span class="toc-number">4.4.</span> <span class="toc-text">3、去重：DISTINCT</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4%E3%80%81%E8%BF%90%E7%AE%97%E7%AC%A6%E5%8F%B7"><span class="toc-number">4.5.</span> <span class="toc-text">4、运算符号</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5%E3%80%81%E7%A9%BA%E5%80%BC%E5%A4%84%E7%90%86%EF%BC%9ANVL-%E5%92%8C-COALESCE"><span class="toc-number">4.6.</span> <span class="toc-text">5、空值处理：NVL 和 COALESCE</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6%E3%80%81%E8%BF%9E%E6%8E%A5%E7%AC%A6-CONCAT-ch1-ch2-%E5%92%8C"><span class="toc-number">4.7.</span> <span class="toc-text">6、连接符 CONCAT(ch1, ch2) 和 ||</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7%E3%80%81%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="toc-number">4.8.</span> <span class="toc-text">7、子查询</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8%E3%80%81%E8%81%94%E5%90%88%E6%9F%A5%E8%AF%A2"><span class="toc-number">4.9.</span> <span class="toc-text">8、联合查询</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9%E3%80%81%E5%88%86%E9%A1%B5%E6%9F%A5%E8%AF%A2"><span class="toc-number">4.10.</span> <span class="toc-text">9、分页查询</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-rowid%EF%BC%9A"><span class="toc-number">4.10.1.</span> <span class="toc-text">(1) rowid：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-Rownum%EF%BC%9A%E5%88%86%E9%A1%B5%E6%9F%A5%E8%AF%A2"><span class="toc-number">4.10.2.</span> <span class="toc-text">(2) Rownum：分页查询</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9B%9B%E3%80%81sql%E5%87%BD%E6%95%B0"><span class="toc-number">5.</span> <span class="toc-text">四、sql函数</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%E3%80%81%E6%95%B0%E5%AD%97%E5%87%BD%E6%95%B0"><span class="toc-number">5.1.</span> <span class="toc-text">1、数字函数</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#round-%EF%BC%9A%E5%9B%9B%E8%88%8D%E4%BA%94%E5%85%A5"><span class="toc-number">5.1.1.</span> <span class="toc-text">round() ：四舍五入</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#trunc-%EF%BC%9A%E6%88%AA%E6%96%AD"><span class="toc-number">5.1.2.</span> <span class="toc-text">trunc() ：截断</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%E3%80%81%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%87%BD%E6%95%B0"><span class="toc-number">5.2.</span> <span class="toc-text">2、字符串函数</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#instr-%EF%BC%9A"><span class="toc-number">5.2.1.</span> <span class="toc-text">instr()：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#substr-%EF%BC%9A"><span class="toc-number">5.2.2.</span> <span class="toc-text">substr()：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#length-%EF%BC%9A"><span class="toc-number">5.2.3.</span> <span class="toc-text">length()：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#replace-%EF%BC%9A"><span class="toc-number">5.2.4.</span> <span class="toc-text">replace()：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#concat-%EF%BC%9A"><span class="toc-number">5.2.5.</span> <span class="toc-text">concat()：</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3%E3%80%81%E8%BD%AC%E6%8D%A2%E5%87%BD%E6%95%B0"><span class="toc-number">5.3.</span> <span class="toc-text">3、转换函数</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#3-1-to-char%E3%80%81to-date%E3%80%81to-number"><span class="toc-number">5.3.1.</span> <span class="toc-text">3.1 to_char、to_date、to_number</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-1-%E6%97%A5%E6%9C%9F%E8%BD%AC%E6%8D%A2-to-date"><span class="toc-number">5.3.2.</span> <span class="toc-text">3.1 日期转换 to_date</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E7%AC%A6%E5%90%88%E6%97%A5%E6%9C%9F%E6%A0%BC%E5%BC%8F%E7%9A%84%E6%95%B0%E5%AD%97%E4%B9%9F%E5%8F%AF%E4%BB%A5%E8%BD%AC%E6%8D%A2"><span class="toc-number">5.3.2.1.</span> <span class="toc-text">符合日期格式的数字也可以转换</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-2-%E5%AD%97%E7%AC%A6%E4%B8%B2%E8%BD%AC%E6%8D%A2%E5%87%BD%E6%95%B0-to-char"><span class="toc-number">5.3.3.</span> <span class="toc-text">3.2 字符串转换函数 to_char</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%97%A5%E6%9C%9F%E8%BD%AC%E6%8D%A2%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="toc-number">5.3.3.1.</span> <span class="toc-text">日期转换字符串</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%95%B0%E5%AD%97%E8%BD%AC%E6%8D%A2%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="toc-number">5.3.3.2.</span> <span class="toc-text">数字转换字符串</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-3-%E6%95%B0%E5%AD%97%E8%BD%AC%E6%8D%A2%E5%87%BD%E6%95%B0-to-number"><span class="toc-number">5.3.4.</span> <span class="toc-text">3.3 数字转换函数 to_number</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4%E3%80%81%E6%97%A5%E6%9C%9F%E5%87%BD%E6%95%B0"><span class="toc-number">5.4.</span> <span class="toc-text">4、日期函数</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E5%BD%93%E5%89%8D%E7%B3%BB%E7%BB%9F%E6%97%B6%E9%97%B4-sysdate"><span class="toc-number">5.4.1.</span> <span class="toc-text">获取当前系统时间 sysdate</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%8A%A0%E5%87%8F%E6%9C%88%E4%BB%BD%E8%AE%A1%E7%AE%97"><span class="toc-number">5.4.2.</span> <span class="toc-text">加减月份计算</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%97%A5%E6%9C%9F%E8%AE%A1%E7%AE%97"><span class="toc-number">5.4.3.</span> <span class="toc-text">日期计算</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5%E3%80%81%E5%85%B6%E4%BB%96%E5%87%BD%E6%95%B0"><span class="toc-number">5.5.</span> <span class="toc-text">5、其他函数</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#5-1-%E7%A9%BA%E5%80%BC%E5%A4%84%E7%90%86-NVL"><span class="toc-number">5.5.1.</span> <span class="toc-text">5.1 空值处理 NVL</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#5-2-decode"><span class="toc-number">5.5.2.</span> <span class="toc-text">5.2 decode</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DECODE-%E5%87%BD%E6%95%B0%E7%9A%84%E8%AF%AD%E6%B3%95%E5%92%8C%E4%BD%9C%E7%94%A8%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F%E4%B8%8E-CASE-WHEN-%E6%9C%89%E4%BD%95%E5%8C%BA%E5%88%AB"><span class="toc-number">5.6.</span> <span class="toc-text">DECODE 函数的语法和作用是什么？与 CASE WHEN 有何区别?</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%94%E3%80%81plsql"><span class="toc-number">6.</span> <span class="toc-text">五、plsql</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%E3%80%81hello-world"><span class="toc-number">6.1.</span> <span class="toc-text">1、hello world</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%E3%80%81%E5%8F%98%E9%87%8F"><span class="toc-number">6.2.</span> <span class="toc-text">2、变量</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3%E3%80%81%E5%BC%95%E7%94%A8%E5%8F%98%E9%87%8F%E7%B1%BB%E5%9E%8B"><span class="toc-number">6.3.</span> <span class="toc-text">3、引用变量类型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4%E3%80%81%E8%AE%B0%E5%BD%95%E5%8F%98%E9%87%8F%E7%B1%BB%E5%9E%8B"><span class="toc-number">6.4.</span> <span class="toc-text">4、记录变量类型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5%E3%80%81if%E9%80%89%E6%8B%A9%E7%BB%93%E6%9E%84"><span class="toc-number">6.5.</span> <span class="toc-text">5、if选择结构</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6%E3%80%81%E5%BE%AA%E7%8E%AF%E7%BB%93%E6%9E%84"><span class="toc-number">6.6.</span> <span class="toc-text">6、循环结构</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7%E3%80%81%E6%B8%B8%E6%A0%87-Cursor"><span class="toc-number">6.7.</span> <span class="toc-text">7、游标 Cursor</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8%E3%80%81%E5%BC%82%E5%B8%B8-Exception"><span class="toc-number">6.8.</span> <span class="toc-text">8、异常 Exception</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9%E3%80%81%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B-Procedure"><span class="toc-number">6.9.</span> <span class="toc-text">9、存储过程 Procedure</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10%E3%80%81%E8%A7%A6%E5%8F%91%E5%99%A8-Trigger"><span class="toc-number">6.10.</span> <span class="toc-text">10、触发器 Trigger</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#11%E3%80%81%E8%A7%86%E5%9B%BE-View"><span class="toc-number">6.11.</span> <span class="toc-text">11、视图 View</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#12%E3%80%81%E5%90%8C%E4%B9%89%E8%AF%8D-Synonym"><span class="toc-number">6.12.</span> <span class="toc-text">12、同义词 Synonym</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#13%E3%80%81%E5%BA%8F%E5%88%97-sequence"><span class="toc-number">6.13.</span> <span class="toc-text">13、序列 sequence</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E5%BA%8F%E5%88%97-1"><span class="toc-number">6.13.1.</span> <span class="toc-text">创建序列</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/09/19/%E5%8D%9A%E5%AE%A2%E6%9E%B6%E6%9E%84/" title="博客架构全景 (One-Page Cheatsheet)">博客架构全景 (One-Page Cheatsheet)</a><time datetime="2025-09-18T16:00:00.000Z" title="发表于 2025-09-19 00:00:00">2025-09-19</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/09/18/Linux%E9%9D%A2%E8%AF%95%E9%A2%98/" title="Linux面试题">Linux面试题</a><time datetime="2025-09-18T13:19:49.181Z" title="发表于 2025-09-18 21:19:49">2025-09-18</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/09/18/%E6%95%B0%E6%8D%AE%E5%BA%93%E9%9D%A2%E8%AF%95%E9%A2%98/" title="MySQL面试题">MySQL面试题</a><time datetime="2025-09-18T13:18:22.257Z" title="发表于 2025-09-18 21:18:22">2025-09-18</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/09/18/Oracle%E7%AC%94%E8%AE%B0(%E6%80%BB)/" title="Oracle笔记(总)">Oracle笔记(总)</a><time datetime="2025-09-18T13:17:11.610Z" title="发表于 2025-09-18 21:17:11">2025-09-18</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/09/18/MySQL%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0(%E6%80%BB)/" title="MySQl学习笔记(总)">MySQl学习笔记(总)</a><time datetime="2025-09-18T13:14:54.830Z" title="发表于 2025-09-18 21:14:54">2025-09-18</time></div></div></div></div></div></div></main><footer id="footer"><div class="footer-other"><div class="footer-copyright"><span class="copyright">&copy;&nbsp;2025 By NINGXIU</span><span class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo 7.3.0</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly 5.5.0</a></span></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><i class="fas fa-spinner fa-pulse" id="loading-status" hidden="hidden"></i><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="text-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据加载中</span></div><div class="local-search-input"><input placeholder="搜索文章..." type="text"/></div><hr/><div id="local-search-results"></div><div class="ais-Pagination" id="local-search-pagination" style="display:none;"><ul class="ais-Pagination-list"></ul></div><div id="local-search-stats"></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div></body></html>